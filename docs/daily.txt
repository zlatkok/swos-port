earlier:
- struggled to create fastest possible parser, which eventually turned out to be a generated state machine
18.03.2018.
- finished custom step of Meson build
- refactored script a little
- working on enabling test of TookenLookup.cpp
19.03.2018.
- fixed invalid token lookup test generator dependency
- trying to get generated token lookup to compile with the tester
20.03.2018.
- managed to compile null tester
- had to change TokenLookup into header instead of cpp file so Meson would stop compiling it
- trying to create actual tester implementation
21.03.2018.
/
22.03.2018.
/
23.03.2018.
/
24.03.2018.
/
25.03.2018.
/
26.03.2018.
/
27.03.2018.
/
28.03.2018.
/
29.03.2018.
/
30.03.2018.
- added T_EOF handling
- working on tester implementation
01.04.2018.
/
02.04.2018.
- improved tester a bit
03.04.2018.
- implemented test string output (print string split into lines)
04.04.2018.
/
05.04.2018.
/
06.04.2018.
- properly implemented output of test string and test tokens
- got to a point where actual tester function needs to be written
07.04.2018.
- fixed a bug in test tokens output
- tester dummy compiled correctly!
- continuing with tester implementation, switched to raw multi-line strings where applicable
- tester basic function compiled for the first time!
08.04.2018.
- fixed tester crashing :)
- passed tests?!?! IMPOSSIBRU!!
- finished std lib lookup function, setting up performance test
09.04.2018.
- implemented custom hash function
- lookup generator + performance tests FINITO!!! RAWR!
- Meson is retarded, doesn't allow access to output from the tests >< (there's a not a very good workaround)
- found out about gperf & the other tool
- successfully added gperf to build, and verified that it is slower (albeit only slightly)
- other tool is a bit slower than gperf so skipping it (only advantage is it's 100% in C++)
- now creating Meson build for ida2asm, in order to have fully functional Visual Studio project
10.04.2018.
- had to modify Python script to accommodate retarded Meson's hard-coded expectancy about output file locations
- got up to the rest of the parser now, trying to get it compiled
11.04.2018.
- Meson build done, even though it's buggy for VS (doesn't rebuild when Python script changes)
- ida2asm successfully compiled!
- and it's not crashing anymore! :)
12,13.04.2018.
- working on parser, solid progress, hope to finish struct parsing soon
- enabled tokenizer to recognize and report numbers
14.04.2018.
- switched build to x86 (was x64), it can only be done when running Meson from x86 set up VS command prompt
- did some testing, and IFs turn out to be slightly faster than SWITCH (tables probably mess up the cache)
- switched to custom isspace that's 10x faster than the one from std lib (wtf)
- added support for parsing numbers, and debugged it
- in the light of recent changes gperf seems to slightly outperform the state machine
15.04.2018.
- after some changes state machine is beating gperf again :)
- improved custom hash by using binary search, now it's outperforming std::unordered_map in release too
- implemented state machine using ifs instead of switches, but it's just slightly slower
- fixed some bugs in parsing
16.04.2018.
- debugging parser and struct assembling code, getting more quirks resolved
17.04.2018.
- re-consolidated struct handling code
- fixed test (broken with new changes and optimizations)
18.04.2018.
- tested tokens with alignment, almost no difference, it even feels negligibly slower
- made lookupToken return hash for id's as well, performance hit is small
- implemented HashMap to store defines
19.04.2018.
- moved hash function to util and turned it into constexpr; however it came with a big performance hit due to
  recursion, so I made constexpr a second version to use for static strings
- made a template so I can just call constHash("some str") and everything is handled perfectly :)
- fixed includes, Meson already includes directories of generated files automatically
- code to catch custom hash collisions was buggy :) but I don't wanna bother finding collision-free function
- moved parseInt() to Token, it was much more natural fit
- now parsing dot directives
- started work on labels
20.04.2018.
/ (lot to do on my real job :P)
21.04.2018.
/
22.04.2018.
/
23.04.2018.
/
24.04.2018.
/
25.04.2018.
/
26.04.2018.
/
27.04.2018.
/
28.04.2018.
/
29.04.2018.
/
30.04.2018.
/
01.05.2018.
/
02.05.2018.
- planned on adding instructions and 'output lines' in general
03.05.2018.
- worked on expanding parser with [,],comma,+,-,* (will need it for parsing instructions)
04.05.2018.
- finally passed tests with parser extensions
- trying to create some sort of instruction parsing/storing skeleton
05.05.2018.
- worked on instruction storage implementation
06.05.2018.
- working on instruction parsing & related stuff
- added register size field
07.05.2018.
- continuing work on instructions, came up with an idea to use placement new
08.05.2018.
- refactored instructions, used placement new (sooo much better now!), continuing work on parsing
09.05.2018.
/
10.05.2018.
/
11.05.2018.
- attempt to change Token into full fledged class failed miserably
12.05.2018.
- added single-quoted string to tokenizer
13.05.2018.
- a bit of work on data item parsing
14.05.2018.
/
15.05.2018.
- close to finishing data item parsing (for now)
16.05.2018.
- worked on adding dup() support to tokenizer (sheesh)
17.05.2018.
- changed the way number parsing works
- refactored lot of code, it's shorter and more clear now
- finally passed all test with parser dup() extension
- after all the changes it's 25% faster!!! (and I wasn't optimizing at all) :)
- initial collecting of data items seems to work fine
18.05.2018.
- added some cool templates to OutputItem ;)
- eliminated size inside output items themselves, only keeping it at outer output item container
- it occurred to me to run static analysis, it uncovered couple of interesting things
- parsed function local variables and arguments
19.05.2018.
- instructions can have THREE operands... gah, fixing that
- save the comments from ignored entities
- parsing passed for the first time!!
- changed struct parsing code to use placement new as well (ended up with more compact and clear code)
- turned size_t to explicit size type where mattered
- starting work on output machinesZ, for now verbatim (copy input as is) to verify parsing
20.05.2018.
- added measurement of the time whole program took to execute
- made output hierarchy, went into details, file opening, reading into buffer etc.
- added #pragma pack where needed, we were using sizeof() which was returning the size with padding
  (and I later assumed no padding when copying data)
21.05.2018.
- fixed a bug in calculating struct size, a bit of progress in verbatim output
22.05.2018.
- struct output is done & correct!! :)
23.05.2018.
- added support for precompiled headers
- defines outputted correctly!! :)
- filtered original swos.asm in the same way as ida2asm, I can diff like a boss now ;)
24.05.2018.
- set up skeleton for instructions output and outputted some basic elements
- replaced all that ugly duplicated code for size assertion with a cool template
- restructured instruction handling code but now it's crashing... ugh... too late to continue
25.05.2018.
- improved instruction processing a bit, but it's still not working properly
26.05.2018.
- improved instruction processing, it's almost there :) just a few more glitches, I hope :)
27.05.2018.
- turned + into strictly binary operator (numbers can't start with it), since IDA uses it ambiguously (& fixed tests)
- missed that variable after "offset" part can also have its offset ;)
- implemented stack variables output
- implemented data items output
- discovered junk chars in strings... sigh... handled those and added tests as well
- they have a char constant: '\'... >_<
- verbatim output is now close enough! :)
28.05.2018.
- tried assembling with TASM but _no chance_
- set up output class hierarchy to share output code efficiently
- haha MASM swallowed up structs :)
- as well as defines! took some friendly persuasion (ie. editing names in IDA), MASM is picky about keywords
29.05.2018.
- implemented mechanism for removing unneeded procs via a text file (this will be expanded later)
- fixed instruction parameter spacing in output
- fixed a bug when some new lines ended up being non-Windows (\r got eaten)
- gah... found out that stupid MASM needs a command line argument to be case-insensitive
- worked around MASM bug (or *extremely* undocumented area), whereas it seems impossible to initialize an array of
  structures containing array of other structures
30.05.2018.
- MASM regards any label inside proc as local, while IDA doesn't and calls them liberally, so worked around that by
  turning each non-anonymous label inside proc into an empty proc (nested proc's are OK)
- included "assume" into output (since MASM needs it)
- started working on parallelized parser (which should break input file to many separate files too)
31.05.2018.
- worked on breaking parsing into threads... unsuccessfully
01.06.2018.
- implemented parsing units
- implemented error reporting system for parsing units
02.06.2018.
- fixed comments being left out when determining chunk borders (as well as segments)
- set up output system for parsing units
03.06.2018.
- fixed invalid output file forming if only a path without filename is given
- now workers only output disassembly and structs & defines go separately
- wrote a Perl script for creating a cleaned up version of swos.asm for testing if everything's in order
- fixed errors in determining limits of input file chunks
- fixed error in parsing directives with comments
- fixed empty lines at starts of output files
- fixed invalid line numbers when reporting parsing errors
04.06.2018.
- set up string set class to hold references
- decided to go with generic map
- learned that externs require type for MASM, need to redesign solution
05.06.2018.
- implemented generic StringMap template, and wired it to defines (seems to work! :))
- redesigned a bit StringMap and StringSet, added range for loop support, it's cleaner now with less code repetitions
- they can also change size and reallocate now (although we don't want them to do that)
- did some refactoring on asm converter worker, it's much nicer now
- finished reference resolving, but it's untested :)
06.06.2018.
- resolved all externs and publics, sent it to output... but it's not working :)
07.06.2018.
- debugging externs resolving
08.06.2018.
- more debugging of externs resolving
- did a bit of refactoring, const Token is used in sooo many places, so aliased it with CToken
09.06.2018.
- did some research on SWOS palettes (unrelated to this project ;))
- finally output is done without triggering any assertions :P
- got the script for assembling all output files going, fixing all the errors
- everything assembled without an error???
- researched on raylib vs SDL, will go with SDL after all
10.06.2018.
- reverted StringMap<T>::Node to private, now iterator returns special struct type with all the necessary data
- removed duplicate references, seems like it slightly improved performance
- implemented move constructor for StringView
- it's not assembling anything... object files are 230 bytes long...
- I was happy too soon :) include had "end" in it so the assembly stopped before any real output
11.06.2018.
- move segments to labels before resolving references to help cache
- finally fixed bugs in extern matching, now line numbers in MASM errors work again! :)
- however, we're back to fixing assembling errors due to MASM idiosyncrasies
12.06.2018.
- fixed redefined Amiga registers
- fixed broken reference duplicate removal
- switched to MASM 8.0; some errors disappeared :D
- fixed invalid prefix error
13.06.2018.
- removed char * and void * operators from String class, it's safer and more efficient now
- added workaround for weird IDA behaviour of not marking initialized structs with data as struct variables
- added guaranteed EOF token to the end of each unit
- added support for deleting range of functions from the assembly
- so far pieces 2, 3, 4, 7 & 8 are assembling fully!
14.06.2018.
- fixed quoted string parsing, I assumed it would work same as in C, but I was completely wrong
- piece 6 and 1 assembling correctly!
- turns out "assume" directives were causing MASM to freak out and add cs: prefix to almost every instruction :P
  (this made some short jumps fall out of range and cause errors)
- it all REALLY assembled correctly this time!!!
- it's linking _without a single_ warning, whew!
15.06.2018.
- plotted out plan for building the whole thing
- went and manually built SDL2 and belonging libraries
16.06.2018.
- will compile libs manually and just use the resulting lib files (with debug versions as well)
- fixed couple of bugs in ida2asm
- fighting with Meson again
17.06.2018.
- build systems are shit, gonna write my own script
18.06.2018.
/
19.06.2018.
/
20.06.2018.
- gave up on writing script, making Visual Studio project and that's it
- great day, it's all linked together and actually correctly invoking SWOS code!!! :)))
21.06.2018.
- added capability to replace asm functions with imports from C++ to ida2asm
- making ida2asm generate swos.h, better to keep it all in one place
22.06.2018.
- finished symbol file parsing code
- added possibility to remove variables from assembly too (not just procs)
- removed a bunch of useless crap and rerouted SWOS() into C++ :)
23.06.2018.
- fixed export needed by C++ not turning up in publics list if it wasn't needed as public in asm
- implemented a nice templatized class to deal with nasty conversions involved with 68k registers ;)
- advancing toward initial image scrolling
24.06.2018.
- collapsed consecutive anonymous data items to 'x dup(y)' form (shaved of ~300kb and should speed up assembling)
- fixed some invalid code, refactored source a little, made it a bit nicer
  (learned that fread() has max read count that it accepts, 1mb = OK, 10mb = FAIL)
- worked on initial image scrolling, will need palette settings & flipping for this
- SDL is so under-documented, will need to figure out a reliable way to do 70FPS precise enough, as well as
  fast way to scale up to at least 640x480
25.06.2018.
- reading docs, trying to figure out how to get 320x200x8 buffer to the screen (efficiently)
26.06.2018.
- managed to draw intro scrolling images, but palette for two.256 comes out wrong :(
27.06.2018.
- ida2asm now reports if any symbol from symbols.txt wasn't found in the asm file
- allowed data items to spawn ranges too
- drew a menu :) but still can't move cursor
28.06.2018.
- added code for keyboard handling (but it's not working)
- enabled ShowMenu
- had crashes in menu drawing functions, turned out to be caused by some SWOS functions destroying registers
  VC++ expects not to change across function calls; modified ida2asm, added generation of push/pop instructions
  to save and restore those registers and that set it straight
- seems like MASM uses nops (0x90) for alignment instead of zeros in data segment, had a string lose ending zero
  terminator because of it, will need to be more careful since retarded MASM can't be instructed which value to use
- implemented natvis file (debugger instructions) for my custom classes, it works great now
29.06.2018.
- added support for hooking functions (inject call to our function on entry)
- placed replaced symbols into SWOS namespace
- some small refactoring
- discovered that the crash outside IDE was due to joypad controls which weren't patched
- implemented directory listing
- implemented log file
- added macro for invoking SWOS procs with relevant registers preserved (esi is especially problem, since it's used
  in so many places), release version used some registers that got clobbered and crashed
- integrated crash reporter
- finished Bash script for creating backups
30.06.2018.
- fixed palette problem, I'm the retard :D only copied 256 bytes instead of 768
- fixed bug in ida2asm where a data belonging to a menu that landed between the chunks got lost (will detect and
  report it if it ever happens again)
- fixed initial cross fade from images to menu
- added 68k register values to crash report
- implemented text input and made hooks bit more elegant and general
- figured out why it's crashing on Playa's machine: MASM is treating variables as pointers within procs in data
  segment... on my machine it works randomly but overwrites memory all over the place
  fixed it by temporarily switching to cseg if proc isn't inside it
01.07.2018.
- fixed highlights not loading in release mode (LoadFile needs to set zero flag even though it's the only outcome)
- removed int 3 at start from DIYLeagueTournamentMatch (bah)
- fixed a bug in ida2asm's collapsing of contiguous anonymous data items... was only comparing their value but
  not the size... yikes!
- fixed not being able to close program while fading (process events on each palette change)
- added synchronization, not perfect but seems OK for now
- fixed lost leading comments on data items
- fixed errors in stdlib fopen(), seems it didn't like unaligned stack, SWOS was pushing a word, made it push
  dword always
- fixed crash before the game, LoadFile() wasn't returning size in D1 per specification, so a low number was inside,
  causing sprite fixup to be done only partially
02.07.2018.
- fixed a bug in log functions (it was choosing va_list variant over ... for 1 argument, had to rename to logv)
- did some timing experiments (unsuccessfully, it's still too slow/fast, but I'll check swpe it had good sync)
03.07.2018.
- fixed fade out to black from stadium menu when starting the game
04.07.2018.
- debugged in-game crash, I thought pitch memory is maybe getting overwritten, tested it with OllyDbg memory range
  breakpoints, but it turned out to be dead-end; memory isn't overwritten, pointer from pitch dat buffer is read
  beyond end of array, and turns out null (so need to check if fixup routine should fix up that area too or somehow
  it's getting the wrong coordinate (D2 is 57 and I think it shouldn't be over 55))
05.07.2018.
- debugged scrolling routines... I understand them much better now, this is very sloppily written, and the code is
  accessing indices outside the array bounds
06.07.2018.
- fixed in-game crashes, game wasn't clipping pattern drawing, and was reading patterns from nullptr
  and writing them to virtual screen area that was never shown
07.07.2018.
- fixed big S sprite not spinning, and crowd not cheering (now calling equivalent of TimerProc each frame)
- fixed generating weird construct "dword ptr [word ptr ..."
- fixed messed up sprites during the game, thank you OllyDbg! :) animation tables were overwritten by
  ResetResultSprites, since the sizes of ScorerInfo arrays were wrong (wrote wrong MASM expression :/)
- program now utilizes ~0% CPU when paused :)
08.07.2018.
- tried to solve damn goalkeeper position problem, unsuccessfully
09.07.2018.
- solved goalkeeper positions :) IDA was misinterpreting some data in positions array as offsets
- fixed CPU player always shooting too high when near goal
- seems edit tactics menu got fixed along the way :)
10.07.2018.
- setup.dat wasn't loaded if game was ran out of directory
- replaced "QUIT TO DOS" with "QUIT TO WINDOWS" :) & added facility to replace contents of data variables
  with given text in @replace section of symbols.txt
- added assert at startup to check if strings offsets are OK, so it will break if they get messed up again
- fixed darkened colors for result overlay appearing greenish
11.07.2018.
/
12.07.2018.
/
13.07.2018.
- decided to use SDL Mixer library for sound, now need to set it up
14.07.2018.
- SDL Mixer set up, added menu music
15.07.2018.
/
16.07.2018.
/
17.07.2018.
/
18.07.2018.
- fixed nasty crackle at sound init
- fixed too fast sound reproduction (played at invalid frequency)
- fixed slowed down replay of menu music when returning from game
- sound's kinda decent now, but there are still some problems (chants go quiet sometimes, some samples seem not to
  play or get muted sometimes)
19.07.2018.
- sound seems quite all right now, except small weird sound in one of the chants, like a quiet whistle
- got XMI support through ADLMIDI, but it sounds awful, will try compiling it with mingw later
20.07.2018.
- trying to fix choppy XMI music... unsuccessfully...
21.07.2018.
- faded MIDI menu music before the game
- finally found a way to play XMI MIDI properly, it was just a shitty example code :) we'll need advanced buffering
22.07.2018.
- implemented advanced buffering and XMI MIDI is finally playing great :)
- implemented MIDI music loop & fade
23.07.2018.
- fixed MIDI menu music messing up the Windows volume when fading out
- fixed OGG pop when starting music again after the game
24.07.2018.
- removed "short" from branch instructions if they want to jump to external symbol
- preparing for intro, at least got it to stop crashing via stubs :P
25.07.2018.
- added one-time play of title.* song if present as in SWOS CD version
- got the intro to play... psychedelic shapes :P
26.07.2018.
- sound on/off option from command line overrides setup.dat
- added sound to intro (at least it seems so :))
- at least intro now shows a picture that it should before it crashes (albeit quite darkened)
27.07.2018.
/
28.07.
- fixed some stuff in intro, but it's still crashing
- fixed title music playing at game frequency if intro was played
29.07.2018.
- intro is showing proper graphics now, but it's still not working correctly
- added command line options to skip intro and image reels
30.07.2018.
/
31.07.2018.
/
01.07.2018.
- speeded up to 15ms per frame, and implemented dynamic slack calculation
02.07.2018.
/
03.07.2018.
/
04.07.2018.
/
05-06.08.2018.
- banging my head about implementing multi-song ADL player, and keep it super efficient
07.08.2018.
- finally had some success with implementing title XMI song, although it's far from over
08.08.2018.
- XMI seems fine playing multiple songs now :)
- added command line parameter for switching midi bank
09.08.2018.
- fixed fade bug introduced with adding intro (it was so simple... d'oh!)
- ReadFile() is literate now, will write "1 byte" and not "1 bytes" :D
10.08.2018.
- fixed Windows volume for the game going to the max after selecting replay after a friendly match
- fixed title song repeating after going back to menu after a match
- fixed players disappearing on fade-out when aborting match in highlights
- fixed pressing 'R' during replay freezing the game
11.08.2018.
- fixed ida2asm to allow combining on-enter and save-regs actions on a single proc
- fixed invalid leading comment getting assigned to generated instructions from on-enter and save-regs
- trying to fix players disappearing during replay fade (when 'R' is pressed)
12.08.2018.
- finally all fades seem to be fixed, hope nothing else was broken in the process :)
- fixed menu song not playing after game is finished normally (not aborted)
13.08.2018.
/
14.08.2018.
/
15.08.2018.
/
16.08.2018.
- implemented joysticks
17.08.2018.
- intro & image reel can be aborted with joypad buttons too
18.08.2018.
- implemented loading and saving options via ini file
- fixed freeze before the game if there is no menu music
- fixed trying to load menu music indefinitely if there music files are missing
19.08.2018.
- added auto-detection of joypad adding/removal
- JoyKeyOrCtrlPressed detects mouse clicks too
20.08.2018.
- added dead zone options for joypads
21.08.2018.
/
22.08.2018.
/
23.08.2018.
/
24.08.2018.
/
25.08.2018.
- fixed a small bug in ida2asm, when collapsing same db's first one would be skipped if it had leading comments
  (also now collapsing consecutive uninitialized values (? - question marks))
- fixed memory overwrite (was actually allocating a bit less DOS memory than is required)
  ha! seems to have fixed career crash ;) (at least one)
26.08.2018.
- studied why goalkeepers are shit... checked their skill values, and that's fine
27.08.2018.
/
28.08.2018.
/
29.08.2018.
/
30.08.2018.
/
31.08.2018.
/
01.09.2018.
/
02.09.2018.
/
03.09.2018.
- debugging goalkeepers... and they're... fixed?!?!
04.09.2018.
- painstaking analysis of diff files reveals the problem... bloody IDA syntax such as:
    mov ax, [esi+(TeamGeneralInfo+6Ch)]
  makes MASM generate some garbage code (no idea how that even worked without crashing)
  does it interpret it as a struct size? who knows...
- hopefully fixed all occurrences (there were like 5-6-7)
- anyway... fucking goalkeepers work!!! :)
- seems passing is also good now, but will be listening for news
- fixed crash when pausing in highlights
05.09.2018.
- [ida2asm] fixed unnecessary space in front of the label that has "short" removed
- [ida2asm] fixed a small glitch, it wasn't picking up \n at the end of the line in @replace section
06.09.2018.
/
07.09.2018.
- worked on fixing ida2asm invalid file limit determination
08.09.2018.
- worked on rewriting file chunk limit determination routine... until the morning but still failed to
  debug it properly
09.09.2018.
- finally, limit determination routine is much better now! I hope :)
- implemented no-break tags: anything between $no-break{ & $no-break} comments must not be split into different files
- optimized ida2asm a little bit ;) sorted if's in lookupToken() by frequency and tightened OutputWriter::outputTab()
- made sure that function leading comment remains in tact if file chunk limit falls in the middle of it
- trailing comment at the end of the file chunk gets outputted properly instead of disappearing
- moved simpleini.h to include root, all the single *.h files are now there
10.09.2018.
- [ida2asm] implemented check for closing no break tag without matching the opening one (across the files)
- started implementing interface to SWOS menu system
11.09.2018.
/
12.09.2018.
/
13.09.2018.
- worked a bit on menu parser
14.09.2018.
- almost finished initial syntax analysis of menu parser (then what's left are semantics, and output generation)
15.09.2018.
- first part of first part is done ;) will be focusing on finishing just enough of menu parser to get the current
  menu stuff to compile (right now that would be the options menu)
16.09.2018.
/
17.09.2018.
/
18.09.2018.
/
19.09.2018.
/
20.09.2018.
/
21.09.2018.
/
22.09.2018.
/
23.09.2018.
- working on implementing first menu (options), the C++ code output
24.09.2018.
/
25.09.2018.
/
26.09.2018.
/
27.09.2018.
- introduced simple variables and expressions (so we can calculate coordinates)
28.09.2018.
- debugging expressions
29.09.2018.
- began implementing output
- integrated options menu in the project for the first time... and it actually works! :)
30.09.2018.
- templates tested and working
- implemented default entry dimensions (not even template entries could do that)
- entries in options menu are now of proper dimensions
- added assert if entry width or height is zero (makes the game crash)
- implemented entry label forward reference system (the thing that even YASM was lacking)
- implemented entry colors
- expanded built-in variables
01.10.2018.
- implemented callback function syntax
- passed entry symbolic names to C++
- implemented a secret in options menu ;)
- started implementing gameplay options menu
02.10.2018.
- menu variables holding defaults entry coordinates and dimensions are now calculated dynamically -- so now each
  entry gets its own values, enabling easy stacking of entries in regards to their predecessors
- built-in variables contained in user variables are now expanded correctly
- values of properties can now be full expressions
- added support for string tables
- implemented complete gameplay options UI
03.10.2018.
- [ida2asm] separated replace variables into their own namespace (there was a variable both in replace and import)
- implemented range check for variable values loaded from ini file
- added support for STDMENUTEXT (text pointers with value -1, and alias @kAlloc)
- added do not edit warning to the top of the .ini file
- added support for entries that are numbers
- implemented complete audio options UI
04.10.2018.
/
05.10.2018.
- fixed the game crashing if ran from outside the SWOS dir
- contemplated about how to implement video options, that menu should go to render module, now have to
  expand menu parser with includes to implement that nicely
06.10.2018.
- refactored parser to be a class without global variables (in order to implement include easier)
- implemented include directive (but haven't tested it :))
07.10.2018.
- debugged include directive and made it work
- working on implementing video options men, got some kind of outline
- implemented default text flags
08.10.2018.
- implemented function and variable that return text width/height in pixels
- I'm finally satisfied with the look of the video options menu (without resolution list)
09.10.2018.
- implemented display resolution gathering and filtering
10.10.2018.
- implemented #repeat <num.repeats> [, <loop variable] preprocessor directive
- implemented nested repeats
- implemented join directive (for concatenating tokens)
- implemented entry dot property syntax (for amending entry properties later on)
- set up non-dynamic entry order
11.10.2018.
- fixed text width calculation bug
- implemented export keyword to export variables to C++
- implemented resolution list scrolling
- implemented video options variables and their save/load to/from ini file
12.10.2018.
- created variables for video options and implemented loading/saving
- implemented whole video options except custom width/height input
- alt-enter switches to/from fake full screen mode (or real back to window)
13.10.2018.
- implemented custom window width/height input, as well as clamping it to the desktop size
- video options menu fully finished (I think ;))
14.10.2018.
/
15.10.2018.
- connected audio options variables, but it's all untested
16.10.2018.
- debugged audio options variables, made it _mostly_ working
- added "please wait" line while enumerating video modes
- fixed a bug in video options when an entry that becomes hidden was still selected when moving window to other
  monitor (when resolution list was recreated)
17.10.2018.
- added volume control for ADL as well
- implemented mouse selection in menus
- fixed ADL fade out (regression)
- increased the size of pitch patterns buffer (and placed it in a separate array of its own)
18.10.2018.
/
19.10.2018.
- fixed issue with git & swos.asm; git was doing CR/LF conversion and it made ida2asm crash (it was violating some
  assumptions about the file) -- starwindz was downloading the source 7z and it got Linux new lines by defaults
20.10.2018.
- worked on describing SWOS sound reproduction into sound.txt, discovered some new stuff
- fixed not playing intro crowd chants
21.10.2018.
- added crowd chants on/off to audio options menu
- discovered memory overwrite when loading result crowd chant (and it's only loaded when auto-replays are on?!)
  (however it might not be observed in original SWOS due to another bug)
- I think I understand sounds now very well (if not completely), I'll let it sleep over before deciding what
  to do next
22.10.2018.
/
23.10.2018.
- contemplating on new audio implementation
24.10.2018.
- started implementing new audio routines a bit
25.10.2018.
- worked on audio, but didn't make as much progress as I would want, ran into a bug in ida2asm file separation,
  same function ended up in two different files
26.10.2018.
- fixed a bug in ida2asm where it would put same function in two files if limit between files ended up somewhere in
  the function leading comments
27.10.2018.
- finished writing new comment loading code
- added new kind of variable to symbols.txt, functionPointer
28.10.2018.
- removed AIL + C lib + most of CD-ROM routines
- connected sound routines with stubs
- implemented comments & most of sfx, only crowd noise is missing atm
29.10.2018.
- added @insert-hook section to symbols.txt, name of the function comma line number goes there, and it will insert
  a <proc name>_<line number> call to external procedure; it's crapily done, only supports one call per proc but it
  was fairly quick to implement :P
- fixed bug when crowd chant wouldn't get reloaded with auto-replays off
- added more log lines for sound reproduction
- fixed a bug with incorrectly calculating random sample index
30.10.2018.
- fixed sample volumes
- implemented enqueued samples reproduction
- finally, it works nicely with original samples ;) now on to enable custom ones
31.10.2018.
- fixed custom comment loading
- connected header comments :)
- fixed menu song played twice when coming back from the game
- trying to implement delayed loading of samples (first we load data from files into memory, and later convert to
  Mix chunks, if ever needed)
01.11.2018.
- fixed delayed loading of samples, it all works great now
- fixed header comment also being played when CPU does it :)
- fixed same comments being picked twice in a row
02.11.2018.
- commentary categories are now neatly sorted to match the document ;)
- fixed some chants wrongly loaded from hard\*
- rearranged audio options menu
- injury comments are played now
- fixed intro chant not being played
- fixed F8 not turning comments on/off
- increased chants volume a bit
- fixed errors when playing with sound off
03.11.2018.
- fixed penalty comments not being played
- fixed original SWOS bugs with penalty flag staying on (discovered by Michael Mihelakakis)
- removed even more CD-ROM routines (sadly, some small number still remains)
- rewriting MenuProc in C++
04.11.2018.
/
05.11.2018.
/
06.11.2018.
/
07.11.2018.
/
08.11.2018.
/
09.11.2018.
- rewrote MenuProc in C++ (hopefully correctly! :))
10.11.2018.
- moved swossym.h out of source dir into output dir, since it's a generated file
- removed crazy, probably invalid high bit clearing of pitch pattern pointers
- fixed ida2asm file splitting when it has align directive preceding a proc that's on the limit
11.11.2018.
- added prevention of mouse selecting whatever item it is on initially when the program starts
- solved starwindz's problem with pitch (I hope!) :)
12.11.2018.
- fade-out title song at start
- hide the cursor while in borderless window full-screen mode
- crowd background noise (that loops the whole game) is now turned on/off together with chants
- temporarily disabled chairman scenes
- starting converting some of the control functions in order to implement new control methods more easily
13.11.2018.
/
14.11.2018.
- allowed symbol that's removed + imported in ida2asm
- set sensible default values for missing variables in ini file (instead of zeros)
15.11.2018.
- wrote mouse input routine :)
16.11.2018.
/
17.11.2018.
/
18.11.2018.
- learned that sprintf_s _does not_ behave as I expected :/ what I really needed was snprintf
- [mnu2h] implemented #print directive for easier debugging
- [mnu2h] fixed bug when reading x/y menu coordinates (missing "self." :)), and implemented output
- [mnu2h] removed previousProperty mechanism, and I had a feeling I was implementing it for nothing :)
- [mnu2h] added dot directive in order to be able to declare entry properties in terms of other entry properties
- made menus always controllable with keyboard, even when no player has keyboard selected
- implemented joypad data saving to options, at least the bulk of it
19.11.2018.
- implemented joypad data loading, fixed some errors
- fixed mouse ruining other controls (I hope!)
20.11.2018.
- implemented redefine keys "dialog", although it's quite buggy
21.11.2018.
- debugged redefine keys, it works pretty good now
- started implementing on select routines for the actual changing of controls
22.11.2018.
- finished on select routines, fixed some bugs, started (made stub) select joypad menu
23.11.2018.
- [mnu2h] added warning about unused variables (only non-included though)
24.11.2018.
- fixed swapped comment playing functions (foul and dangerous play)
25.11.2018.
- [mnu2h] fixed some bugs and added line number to referencing unknown entry error
26.11.2018.
/
27.11.2018.
/
28.11.2018.
/
29.11.2018.
- struggling with controls
30.11.2018.
- ditto
01.12.2018.
/
02.12.2018.
/
03.12.2018.
/
04.12.2018.
/
05.12.2018.
/
06.12.2018.
/
07.12.2018.
/
08.12.2018.
/
09.12.2018.
/
10.12.2018.
/
11.12.2018.
/
12.12.2018.
/
13.12.2018.
/
14.12.2018.
/
15.12.2018.
- haven't done much, but at least got it to compile again and stop triggering asserts :P
16.12.2018.
/
17.12.2018.
- repositioned config entries and implemented highlighting and enabling/disabling on main controls menu
18.12.2018.
- [mnu2h] fixed handling of next entries if disabled and next direction are given
- [mnu2h] fixed #join directive (was returning one token before the proper one)
- fixed controls menu items order
19.12.2018.
- further fixed controls menu items order (hopefully it's all good now)
- implemented scroll arrow handlers (and corrected arrow positions)
20.12.2018.
- worked on implementing controls selection from the menu (although it needs debugging)
21.12.2018.
- fixed controls selection (seems quite all right now)
- fixed item transition order (control items to scroll arrows)
- fixed infinite loop in InputText (was happening since MenuProc rewrite in C++)
22.12.2018.
- found out that I've missed to analyze CheckControls, but luckily it can stay as is (it just translates
  both player controls into menu controls (ORs them))
- trying to fix controls getting stuck in menus even after key release when player 2 is set to mouse,
  and finally succeeded! forgot to reset the controls as the first step (d-oh!), how did it work at all??
23.12.2018.
- a little bit of analysing, but no results
24.12.2018.
- fixed invalid entry selection by mouse calculations (y coordinate wasn't taking into account black bars
  on top and bottom if height isn't a multiple of 200)
- set default height to be multiple of 200
- started implementing play match menu fire, but it will be more complicated then I anticipated;
  hopefully any joypad fire press should select that joypad for the team (as well as mouse click)
25.12.2018.
- thought out how to apply controls through fire in play match menu and maintain them throughout the game
- the need to track all joypad buttons will require that all joypads be open, which means big changes to
  joypad processing code...
26.12.2018.
/
27.12.2018.
- I've decided to go with always current list of all connected joypads, player's choice will be an index there, and
  we will be able to track all the buttons pressed anytime (I've read some SDL code and it doesn't seem that tracking
  all joypads will pose a significant resource drain)
28.12.2018.
- first phase of moving to permanent joypad list is finished, gotta fix menus to use it too
- GUIDs of selected joypads are now saved, and an attempt is made to restore it at the next startup
- list of joystick ID's in recently added order is maintained (single id won't cut it)
29.12.2018.
- fully switched to a new way of handling joypad input
- just noticed that each SWOS menu has something "useful" selected upon entry... NOT exit button which I was
  systematically setting as default in all of my menus... d-oh!
- fixed controls menu items order some more :)
- added log entries for control selection
- wow, it didn't even crash :P
30.12.2018.
- separated kKeyboard controls into explicit kKeyboard1 and kKeyboard2 in order to be able to use them independently
  during the game
- implemented key conflict resolution at startup if both players are using keyboard
- plenty of refactoring
- fixed some small bugs
- reorganized scan codes into a small class, stopped using SWOS variables
31.12.2018.
- fixed mouse clicks when only player 2 keyboard is selected (they would stop working)
- fixed player 1 having invalid index for selected joypad
- fixed invalid joypad assignment if GUIDs are not found
- fixed fire staying on shortly after clicking a menu item
- implemented mouse wheel scrolling where applicable ;)
01.01.2019.
- fixed wrong joypad GUIDs ending up in ini file
- fixed warning message overlapping mouse click aborts label in redefine keys dialog
- changed menu default items from exit to something useful (usually top element), except in controls menu (for safety)
- refactored video and audio options saving/loading into renderer/audio module (where they belong)
- no more "Window mode change requested, from 1 to 1" message in the log :)
- played a first mouse "controlled" game :)
02.01.2019.
- implemented selection of joypad by simply pressing fire, had to add special case handling of my stupid game port to
  USB adapter which sends button codes when axis are used for the first time
03.01.2019.
- [mnu2h] fixed parsing empty file :)
- [mnu2h] added a rudimentary check for variables that go into C++, making sure they aren't C++ keywords (not
  everything is checked, that might be a too big effort, but even checking at this level helps)
- in-game controls are finally working properly! as well as any controller fire on "PLAY MATCH" entry
- working on rewriting replay/exit menu after friendly game, but so far got only black screen
04.01.2019.
- fixed mouse not working on replay/exit menu, it's working perfectly now, just needed to redraw the menu
  before the fade-in ;-)
- added a new shortcut: alt-shift-enter -> going into true full screen mode
- fixed bench button not working on keyboard controls
- fixed joypad auto-connect (player 1 and 2 were swapped... d-oh!)
- mouse cursor doesn't get hidden anymore when going full screen if we have a mouse player
- playing with mouse is a bit easier now, but it's still awful :D
05.01.2019.
- got some cool ideas for joystick config menu ;) (decided to combine everything into one menu)
- things can't go on like this, I simply must refactor and divide monstrous controls.cpp file
- pooh... refactored the damn thing, I'm dying
06.01.2019.
- working on joypad config menu, it turns out there will be quite a lot to do there
- finished joypad info & readings display
07.01.2019.
- introduced error checking when saving and loading options
- just realized I haven't checked for invalid joypad buttons input (fixed!)
- working on joypad config menu, finished numeric input in menus, rewrote input routine from scratch, it works
  so beautifully :)
08.01.2019.
- [mnu2h] fixed invalid line number when warning about unused variables (was storing wrong token)
- [mnu2h] fixed invalid unmatched parenthesis error if there's more than one closing parenthesis clumped together
- [mnu2h] fixed last token in the file getting ignored
- [mnu2h] fixed incredible error of ending up with wrong results due to expressions not having outer parenthesis, so
  if we got a = b + c, d = 2 * a, it expands to d = 2 * b + c (ouch!)
- also learned the difference between parenthesis and parentheses :D
- incredibly dull work of setting up dead zone box menu entries
09.01.2019.
- [mnu2h] added some aliases to some entry properties cause I kept getting it wrong :)
- set up dead zone % +/- buttons order
- introducing button handlers to actually change dead zone values
10.01.2019.
- finished implementing handlers for changing all dead zone values (both absolute and percentage)
- dead box "animation" finished and works nice :)
11.01.2019.
- finished joypad button selection! finally the joypad config menu is finished! :)
- fixed few critical bugs preventing match from playing
- fixed mouse wheel stopping working after returning to a menu with wheel entries
- added right mouse click = exit menu (works on most menus but not every single one)
12.01.2019.
- finally fixed mouse coordinate calculation in odd sized window (for good I hope!) ;)
- refactored render into video dir with several components (menu is now in its own file)
- stopped hiding mouse pointer in fake fullscreen mode if we're not in the game, and fixed entry selection
- applied my beautiful number input routine to width/height fields in video options menu, and centered entries
  a bit better
13.01.2019.
- changed crash report to grab swos.ini instead of setup.dat (woops)
- fixed crash at startup if joypads aren't selected for both players
- forgot to save regs of GetTextSize, seems it caused crash at Playa's
- fixed Int2Ascii not returning A1 as the end of the string (totally missed that one)
- [mnu2h] fixed undefined fields in entry when there previous entry variables are used in first entry
- [mnu2h] added proper support for changing meny x/y coordinates
14.01.2019.
/
15.01.2019.
- started implementing main menu a little, laid out some basics
16.01.2019.
/
17.01.2019.
/
18.01.2019.
/
19.01.2019.
/
20.01.2019.
/
21.01.2019.
- [ida2asm] added special symbol "@end" which can be used in symbol removal range as an end of range marker, meaning
  remove everything until the end of the file
- worked a little on main menu reimplementation
22.01.2019.
- wrote a bit of Awk[ward] script to convert nationality codes to enum :)
- finished converting main menu, just noticed that colors looks slightly different compared to DOSBox
- [ida2asm] fixed not reporting duplicate symbols in symbols.txt
- [mnu2h] if function name is prefixed with tilde AND in quotes, it will be sent to C++ as is (and without checking)
- added handling of numeric keyboard digits
- fixed invalid mouse behaviour in full screen (I hope! too tired to check...)
23.01.2019.
- and of course it's not fixed, it's not THAT easy
- improved error handling in full screen switching logic
24.01.2019.
- but NOW I really fixed mouse in full screen, seems I had to clear full screen flag of the window and then set it
  back in order for changes to occur and mouse coordinates to be correctly translated
- request to switch to the same full screen resolution we're in will be refused
25.01.2019.
/
26.01.2019.
- rewrote delay routine and switched to high precision timer... wow, the game feels much better! downside is that
  more CPU is used, but we'll see if something can be done there
27.01.2019.
- PrepareMenu() was calling ConvertMenu() without saving the registers... yikes, no idea how it even worked so far
28.01.2019.
/
29.01.2019.
/
30.01.2019.
/
31.01.2019.
/
01.02.2019.
/
02.02.2019.
/
03.02.2019.
/
04.02.2019.
/
05.02.2019.
/
06.02.2019.
/
07.02.2019.
/
08.02.2019.
/
09.02.2019.
- made test exit icon
10.02.2019.
- [mnu2h] added support for custom draw entry functions
- test exit icon improved, and is now in place.. doesn't look half bad ;)
11.02.2019.
- implemented quit game menu
- learned that I have to call CommonExitMenu() after showing any menu from main menu
12.02.2019.
/
13.02.2019.
/
14.02.2019.
/
15.02.2019.
/
16.02.2019.
- did some planning on how to implement replays; will need to reimplement selectFilesMenu, that will be a bitch
- reversed select files menu, another tiny corner of SWOS is charted, woopteedoo
- [ida2asm] fixed reporting `@end' as a duplicate symbol
- [ida2asm] segments are now properly terminated if they are split in different files
17.02.2019.
- fixed invalid constants for gray frame... all options menu header items had invalid colored frame (dark gray
  instead of light gray), funny how nobody noticed :P
- [mnu2h] fixed outputting initial menu x/y coordinates (last ones listed in file were outputted as initial)
- [mnu2h] decided to implement compile-time mini-language inside menu converter ;)
  (in order to address the needs of new increasingly complex menus)
  so it was programmed but not tested at all, this will be fun to debug :P
18.02.2019.
- [mnu2h] been debugging preproc parser, will need to add some changes to the scanner in order for everything to work
19.02.2019.
- [mnu2h] changes in effect, parser debugged and working beautifully, C expressions are now available :)
- [mnu2h] implemented quoting in strings ("thi\"s\"" and 'this\'s\'')
- [mnu2h] extended preprocessor expressions to use all kinds of variables, and fixed bunch of small bugs
  (now just gotta implement repeat loops properly, with expression re-evaluation)
20.02.2019.
- worked on evaluation tree generation as a result of parsing so true loops can be implemented (and conditional
  statements later if/when required)
21.02.2019.
- separated evaluation from parsing, so now the field is ready for proper repeat loop implementation (still have to
  figure out constant expression folding, although it's not too difficult)
22.02.2019.
- almost debugged repeat loop implementation (nested loops still not working properly)
23.02.2019.
- debugging loops, seems the problem is more involved
24.02.2019.
- some invalid tokens are in the stream, seems tokens weren't copied by value (by reference) and got modified, but
  didn't manage to fix it
25.02.2019.
- finally fixed nested loops :)
- linted mnu2h Python code, that didn't go too bad
26.02.2019.
/
27.02.2019.
/
28.02.2019.
/
01.03.2019.
/
02.03.2019.
/
03.03.2019.
/
04.03.2019.
/
05.03.2019.
/
06.03.2019.
- looked around re-establishing select files menu
07.03.2019.
- some small advancement, wrote machine-independent findFiles()
08.03.2019.
- dabbling a bit with replacements for GetFilenameAndExtension() and SelectFileToSaveDialog(), will need a way to
  return int from imported function (since just setting eax doesn't work with void function, compiler is adding
  some destructor and what not)
09.03.2019.
- had to modify import function specification so that I could specify that function returns an int, writing a
  linear memory storage vector-like template to hold imports
10.03.2019.
- trying to fix a problem with custom iterator dereference operator
11.03.2019.
- silly me, it was simple, I was returning value instead of reference, now everything is all right
- implemented function that returns zero flag clear/set (had to use declspec naked), so the temporary problem is
  solved, we're back in the saddle ;)
12.03.2019.
/
13.03.2019.
- removed all of the old select files menu code and data, and started the re-implementation
14.03.2019.
/
15.03.2019.
/
16.03.2019.
- wrote sorting routine for filenames
17.03.2019.
- managed to work on it a little bit
18.03.2019.
/
19.03.2019.
/
20.03.2019.
/
21.03.2019.
/
22.03.2019.
- progressed a bit in initializing select files menu
23.03.2019.
- refactoring mnu2h into submodules, it was already at over 2k LOC single file
24.03.2019.
/
25.03.2019.
/
26.03.2019.
- finally got a little done
27.03.2019.
/
28.03.2019.
/
29.03.2019.
/
30.03.2019.
- did a little bit
31.03.2019.
/
01.04.2019.
/
02.04.2019.
- worked a bit
03.04.2019.
/
04.04.2019.
/
05.04.2019.
/
06.04.2019.
/
07.04.2019.
/
08.04.2019.
/
09.04.2019.
/
10.04.2019.
/
11.04.2019.
/
12.04.2019.
/
13.04.2019.
/
14.04.2019.
/
15.04.2019.
/
16.04.2019.
/
17.04.2019.
/
18.04.2019.
- finally managed to do some significant work, continued with mnu2h refactoring, extracted tokenizer from parser,
  and currently breaking up those awful long parser methods, making them much shorter and sweeter
19.04.2019.
- continued working on refactoring, had solid progress
20.04.2019.
- menu and entry parsing is refactored (Uncle Bob would be proud ;)), now working on code generator
- code generation has been extracted from parser
- it turned out that due to a bug the refactored code didn't run at all, and there were plenty more bugs :)
  nevertheless, a lot has been done and it seems I will be able to extract preprocessor after all, so that's some
  good news, but too tired to do it now :)
21.04.2019.
- set up Python tests with coverage reporting
- covered Tokenizer completely! (except for __repr__ and one line I think can never be reached :))
22.04.2019.
- upgraded mnu2h into its own project with separate dir (it earned it well ;))
- started covering parser (it's gonna be a rough ride ;)) and fixed some minor bugs in tokenizer
- got parser coverage up to 46%
23.04.2019.
- got parser coverage up to 72%
- extraction of preprocessor and test coverage in progress, it is currently at 27%
24.04.2019.
- doing a big redesign of the way tokens are handled through the parser (I think this implicit structure that kind
  of grew on its own is invalid, as each function returning the token that follows it doesn't allow for entities at
  the end of the file, + I have much better error handling as it is known in advance which tokens are searched for
  (since we do it now from the handling function, and not the previous one which has no clue about what's coming))
25.04.2019.
- big redesign done! finished with negative test and that's a huge milestone, coverage is up at 83% for parser and
  71% for preprocessor, which is about the max before positive tests
- fixed many smaller bugs
- started implementing positive tests, added tests for parser warnings and preprocessor expressions;
  raised coverage to 87% parser, 82% preprocessor (winning these high percentages is harder than it seems!)
- I better go to sleep soon or I feel I might faint :P
26.04.2019.
- fixing and refactoring repeat directive
- extracting preproc expressions into a class of its own
- extracting variable handling into a class of its own
27.04.2019.
- fixed all tests except #repeat
- all the tests are passing after the refactor!
- added text measurement test
- coverage: Parser 89%, PreprocExpression 97%, Preprocessor 99% (!), Tokenizer 95%, Util 86%, VariableStorage 92%
- this is getting near the end, gotta add some additional tests here and there and to write code generator tests
28.04.2019.
- added line number checks to error message tests
- fixed bug handling raw (~) functions
- fixed bug handling single quoted string in string tables
- added tests for all kinds of variables
- fixed a few bugs
- added two new directives: #warningsOn and #warningsOff, mainly for tests ;) but it could prove useful on its own
- learned I can access static method through self reference, oops :)
- added tests for entry properties
- did a pylint run, looking good
- added crazy hybrid evaluation of preprocessor and standard variables (whatever can be parsed by the preprocessor
  expression parser will be evaluated as integer)
29.04.2019.
- fixed a little bug with tokenizer warnings off directive
- implementing many of code generator tests
- #join() can now be used within expressions
- forgot to test string escapes, fixed
- woops, seems a preprocessor expression inside a loop containing a mix of constants and variables is broken
30.04.2019.
- doh, preprocessor is PURRfect, I put the wrong variable in the test (idiot!)
- allowed #join to join itself recursively, pretty cool huh :)
- added integer format specification as in Python (actually just forwarding it to Python :))
- improved tests a bit
01.05.2019.
- added verify C++ keyword test
- covered dynamic menu variables (prev. x/y etc.)
- fixed some problems with internal variables expansion
- added some awesomeness in the form of string indexing operator as well as ability to invoke basic string editing
  functions on constant string (and the parameters can be preproc expressions!)
02.05.2019.
- added tests for included files (and fixed a bug there)
- added tests for string tables
03.05.2019.
- improved parsing of delayed expansion properties
- fixed negative number parsing
- fixed error in rotation routines
- added Util tests
- coverage: Parser 99%, Preprocessor 100% (!), Util 100%, only CodeGenerator left (81%)
04.05.2019.
- fixed error in function parameters
- added test for preprocessor in all contexts
05.05.2019.
- added tests for menu index assignment and exported variables to code generator tests
06.05.2019.
- adding final code generator tests
- fixed a bug in the parser (when assigning default entry values)
- fixed a bug in the code generator, it was needlessly outputting entry for default color
- fixed a bug where ResetTemplateEntry wasn't outputted
- fixed a minor bug with settings entry directions
- overall coverage is at 99%! my job here is done :)
07.05.2019.
- fixed a small bug when assigning entry property values from other entry properties
08.05.2019.
- and the build is running again! (although I'm not satisfied with it -- VS build system just sucks big time)
- started extraction of comments.cpp from audio.cpp
09.05.2019.
/
10.05.2019.
- refactoring comments but it seems to be much more complicated than I thought...
11.05.2019.
- refactoring audio stuff is nasty, but at least it's coming along
12.05.2019.
- finished audio refactoring, took longer than expected, but it looks good, and seems I didn't break anything :)
  (but who knows :)); also found and removed an unused variable (it seemed to have been there for quite a while)
13.05.2019.
- [mnu2h] report an error when an entry has zero width/height (so we can catch it before compiling C++ code)
14.05.2019.
/
15.05.2019.
/
16.05.2019.
/
17.05.2019.
- fixed a small bug in findFiles()
18.05.2019.
/
19.05.2019.
/
20.05.2019.
- I've been contemplating the idea of creating tests for SWOS menus for a while now; it's gonna be really difficult
  getting it all to work, but the benefits will be immense
21.05.2019.
/
22.05.2019.
/
23.05.2019.
/
24.05.2019.
/
25.05.2019.
/
26.05.2019.
/
27.05.2019.
/
28.05.2019.
/
29.05.2019.
/
30.05.2019.
/
31.05.2019.
/
01.06.2019.
/
02.06.2019.
/
03.06.2019.
/
04.06.2019.
/
05.06.2019.
/
06.06.2019.
/
07.06.2019.
- created DLL that will be fetching SDL function address table (so we can mock them)
08.06.2019.
- SDL hooking test passed with flying colors!! :)
09.06.2019.
/
10.06.2019.
/
11.06.2019.
- integrated tests into main project (will need to use asm files)
12.06.2019.
- trying to compile tests which use basically all stuff as the main project, but currently failing
13.06.2019.
- fixing all the link errors since some files are missing from the main project
14.06.2019.
- tests finally compile and link!
15.06.2019.
- realized I didn't need render.cpp (it's all SDL interface to "VGA" buffer)
16.06.2019.
- setting up base test structure... still struggling :)
- need to include generated menu header in order to access menu constants... but there are also static functions in
  there that get declared, so added them as stubs in header, under conditional SWOS_TEST but now it fails since I got
  menus in tests that are supposed to be compiled normally... ugh
17.06.2019.
/
18.06.2019.
- [mnu2h] updated tests with #ifdef for testing stubs
19.06.2019.
- worked a bit on it, fixed creating a library when compiling tests
20.06.2019.
- dabbled a bit
21.06.2019.
/
22.06.2019.
- executed first hello world unit test, very primitive, but it ran :)
23.06.2019.
- finally set up SWOS environment in tests :)
- [mnu2h] declared string tables as static (that was discovered when including the file twice for the tests)
24.06.2019.
- fixed commentary loading that I completely broke :/ I really have to get these things covered with unit tests...
- tried to compile with C++17 since I upgraded to Visual Studio 2019, but if I do that I lose capability to compile
  for Windows XP.. @#$&$!^ (plus SimpleIni breaks... sheesh)
- [mnu2h] fixed nasty bug with string tables: I forgot to #pragma pack them! added test for this as well
- finally managed to render a single menu frame for tests... I think :D
25.06.2019.
- had nice progress with unit tests, now actually writing one for video options menu, will see how it goes ;)
- [mnu2h] fixed minor formatting issues, extraneous new lines
26.06.2019.
- finally got the error reporting the way I like it, and failed assertion exception hierarchy took shape
- civilized SDL faker a bit, now need to fill in more stuff and create a good test for video options
27.06.2019.
- fixed a bug in loadFile when using offset parameter
- refactored duplicated code in video options menu
- implemented screenshot grabbing in tests (damn useful it is!)
- writing tests, but it's not going the way I planned
28.06.2019.
- writing video options resolutions test
- removed resolution limiting from video options (any resolution will be now displayed in the menu, not sure if
  that's smart, remains to be seen)
29.06.2019.
- fixed few bugs in tests and finally incomplete tests are passing
- lookie, lookie, VS static analysis actually caught a bug in menus, whaddya know...
- updated SimpleIni, and I can compile with C++17 now MUAHAHAHA (at least the tests, they don't need Windows XP ;))
- implemented tester command line parameters
- started implementing window mode tests
30.06.2019.
- implemented video options menu mode switching test
- fixed slight mis-positions of the items (by a pixel or two)
01.07.2019.
- added timeout detection to tests, if any case gets into infinite loop tester will detect it, report it and exit
02.07.2019.
- fixed nasty bug with tester error reporting, took a reference to a non-const object returned from a function
- implemented custom width/height input test
03.07.2019.
- sorted video resolution list by highest first, makes more sense to prefer the best resolutions system can handle
- handled the case when we can't go full-screen (resolution list empty) (UT's already showing their value)
- recolored items in video options menu (didn't like the gray on inactive items, it looked like they can't be
  selected anymore)
04.07.2019.
/
05.07.2019.
- implemented list scrolling test
- added exit button test
- implemented test for resolution change failure
06.07.2019.
- fixed a small bug with resolution list where the current resolution would stay marked even in windowed mode
- video options menu tests are DONE!!! hellz yeah!!!
- [mnu2h] added tests for string manipulation routines
- finally pushed code to the repository today, haven't done that in a looong time
- fixed clumsy report output in tester with multiple tests
07.07.2019.
- fixed crash when opening edit tactics menu
- added Great Scott! We've crashed! to the log when crashing ;)
08.07.2019.
/
09.07.2019.
/
10.07.2019.
/
11.07.2019.
/
12.07.2019.
- wrote fake file system for testing ;)
13.07.2019.
- debugged fake file system and sound samples loading
14.07.2019.
- some more stuff done on commentary tests
15.07.2019.
- and here the value of tests show: I actually swapped foul & dirty tackle comments; stuff like this is really hard
  to catch by testing alone
16.07.2019.
- again the power of testzs: bar hit comment was wrong, reusing last comment from post hit and not using its last
  comment at all
- found that keeper claimed has one mute comment (length of sample is 0, I assume AIL will ignore but it still goes
  through normal comment procedure, so it's a valid silent comment), chance of playing is 12.5%
- fixed some errors in sound.txt
- fixed invalid penalty saved comment table
- so much invalid stuff in the comments, will check it thoroughly tomorrow
17.07.2019.
- fixed yet ANOTHER bug with double chance sample assignment.... ><
- worked on wrapping up original comments tests but didn't managed to finish
18.07.2019.
- finished all the testing for original comments except for a few complicated routines, leaving those for later
19.07.2019.
/
20.07.2019.
/
21.07.2019.
- finished tests for original comments, skipped chants during the game as their logic is very complicated
22.07.2019.
- added test for automatic loading of custom sound extensions (mp3, wav, etc.)
23.07.2019.
/
24.07.2019.
/
25.07.2019.
/
26.07.2019.
/
27.07.2019.
/
28.07.2019.
- finally started testing custom comments, and found a bug: if a category consist of 2 or more files which have
  identical content (actually one file with different filenames), game will hang when trying to play comment from
  this category
29.07.2019.
/
30.07.2019.
/
31.07.2019.
/
01.08.2019.
/
02.08.2019.
- finally finished commentary tests... making tests is taking longer than I expected (and is boooring), I'll have to
  restrict them to absolutely essential stuff and TDD
03.08.2019.
/
04.08.2019.
- [ida2asm] line number bug that is tormenting me for a long time was at least partially amended, but still not
  fixed completely :(
05.08.2019.
- [ida2asm] fixed a bug when remove block goes to the file end, EOF token is returned from the parseProc(), but new
  line is expected, resulting in parse error; solved by injecting new line token to the end of each division end if
  it wasn't already there
- [ida2asm] fixed a bug when proc hook was placed on a label; it was checked only in instruction, now it's checked
  when label is encountered as well, notice that it could still be skipped if it's placed on a comment line but I'd
  rather not check it for every comment in the file
- fixed a crash in a CPU vs CPU game with at least 1 top goalkeeper (discovered by starwindz)
06.08.2019.
- haven't done much, but finally settling on select files menu recreation (with test ready to debug it once it's
  (nearly) done)
07.08.2019.
/
08.08.2019.
- didn't do any coding, but debugged a bit and found out why bottom fans aren't getting animated
09.08.2019.
/
10.08.2019.
/
11.08.2019.
/
12.08.2019.
- [ida2asm] added parsing error for unknown directive, it was unhandled before but starwindz was modifying swos.asm
  directly and entered something unsupported
- [mnu2h] added special variable to reference previous entry ordinal
- bit of progress in select files menu (actually wanted to fix career crash but can't load career without this
  menu :D)
13.08.2019.
/
14.08.2019.
/
15.08.2019.
/
16.08.2019.
/
17.08.2019.
- fixed a problem with findFiles() using real root path and fake test files were added to root
18.08.2019.
- fighting with select files menu, it's as nothing is working properly
19.08.2019.
- so a hilarious thing happened, suddenly debug tests got really really slow... up to a point they couldn't be run
  in entirety; timeout check wasn't triggering so it wasn't an endless loop, it was just slow; upgraded Visual
  Studio, rebooted the computer... slow again!! OK, I fire up the profiler, it finishes in <50ms (debug version)!!!
  run debug version => dog slow... I am pissed now, WTF is going on and how will I even debug this nightmare...
  luckily, in a flash of inspiration data breakpoint comes to mind, and I check, yes! here it is! little mother
  @#$%@# :D deleted it and it's all good again :)
- didn't progress much but at least cleared up the mess a bit
20.08.2019.
/
21.08.2019.
/
22.08.2019.
/
23.08.2019.
/
24.08.2019.
/
25.08.2019.
/
26.08.2019.
/
27.08.2019.
/
28.08.2019.
/
29.08.2019.
/
30.08.2019.
/
31.08.2019
- cleaned up Visual Studio directory structure as per good advice by Mike McShaffry; now everything gets generated
  in tmp dir without polluting vc-proj dir
01.09.2019.
/
02.09.2019.
/
03.09.2019.
/
04.09.2019.
/
05.09.2019.
/
06.09.2019.
/
07.09.2019.
/
08.09.2019.
/
09.09.2019.
- finally got some progress, x positions seem to be fine now
10.09.2019.
- file type descriptions are shown, and starting y position is fixed
11.09.2019.
/
12.09.2019.
/
13.09.2019.
- [ida2asm] pointer to an array can now be used in symbols.txt
- implemented getPixelStringLength in C++
14.09.2019.
/
15.09.2019.
- misread spriteGraphicsPtr type :facepalm, it's actually a pointer to array of pointers to Sprite graphics, updated
  SymbolFileParser accordingly
- made a good quality string elision routine, since I have a feeling this isn't the last we'll see of it, but some
  tests are still failing
16.09.2019.
/
17.09.2019.
- fixed tests, elision seems to work great now
18.09.2019.
/
19.09.2019.
/
20.09.2019.
- [mnu2h] fixed template entry values being ignored under certain conditions
- found that the colors are broken in controls menu, but no time now to fix them...
21.09.2019.
- fixed missing background colors in controls menu, entry background type wasn't set (it was set to default
  0 = none), no idea how that worked before
- thought there was a bug in handling expressions inside mnu2h #repeat's but it's just me failing basic matrix math
- [mnu2h] fixed duplication of fields from template entry
- [mnu2h] fixed a small bug with evaluation of entry ordinals involving expressions
- set up navigation in select files menu, however something might be buggy around moving through disabled item
  field, too tired to handle now
22.09.2019.
- ha, it wasn't a bug with moving through items, it's that I used next disabled entry to the left field as custom
  user fields for storing file indices to associate entries with filenames... sucks that entries lack user field,
  but fixed it now and it works like a charm :)
- loading files finally works again :) (with same old limitations but we'll get to that ;))
23.09.2019.
- got kinda close to making save work, but something's wrong with competitions (I get wrong name after loading them)
24.09.2019.
- fixed default menu entry in quit menu to be return to the game
- fixed crash when aborting save (returned string could be nullptr, d-oh!)
- fixed a small bug with string elision
- aaand the save is finally working! :) as for the competitions nothing was wrong, their funny names confused me :)
- added scrolling but arrows aren't reachable yet so gotta solve that first
25.09.2019.
- scrolling arrows are now reachable and the scrolling works just perfect :)
- added a feature to menu system which enables menus to register a "global mouse wheel entires", a pair of entries
  which get triggered whenever the wheel is scrolled up/down; it works globally, simplifies things a lot and is
  pretty cool, for now using it in select files and video options menus
- fixed single column with long filenames sticking to the right (since there's only 2 columns it can only pick
  leftmost or rightmost)
- wrote initial version of build description document
26.09.2019.
- did something but fell asleep and now can't remember what it was
27.09.2019.
- did some nice refactoring
- writing tests for select files menu, and caught one bug! even being boring to exhaustion and slow to write, tests
  are a really great asset
28.09.2019.
- adapted C++ style guide to use with the SWOS port
- wrote bulk of initial version of ida2asm documentation
29.09.2019.
- finished entry transition test for select files menu and fixed bugs found during the writing
- added abort button press test for select files menu
30.09.2019.
- worked on selecting file test in select files menu
01.10.2019.
- finish() hook in tests wasn't called at all, whoops!
- fixed yellow "please wait" test in video options menu
- finished selecting file test in select files menu and fixed some bugs that were discovered
02.10.2019.
- implementing scrolling files test
03.10.2019.
- finished scrolling files test, now debugging it, but it's still not working properly
04.10.2019.
- scrolling files test is passing! :)
- load competition test is passing as well!
- spotted a bug, loaded highlight name gets forgotten upon reentering the menu
05.10.2019.
- fixed yesterday's bug and added a test case, easy peasy
- fixed top scroll arrow overlapping with files if it's a full list with in a save dialog
- some tests are failing in release mode :O and they are flaky no less -_-
    edit: EditTactis() needed a safe call macro, but it somehow worked in debug version,
    and the flakiness came from returning address of local TeamGeneralInfo variable, IDIOT :S
    can't believe there was no warning about this, maybe because I was assigning it to a Register class and
    its voodoo template magic mesmerized the compiler
- [tests] added assert when warning or error are logged (can be turned off), it's too dangerous when those
    things go unnoticed
- [tests] fixed not reporting case name of the test that failed
- [tests] fixed some hideous examples of illiteracy
- [tests] fixed names of bitmap screenshots (much nicer now)
- fixed wrongly matching file extension if first 3 characters match (but not the rest) & wrote a test for it
06.10.2019.
- refactored mouse handler in menus into its own module
- sped up scrolling when arrow is clicked and mouse button held; while doing it found out that menu entry
  functions were getting called without safe call, preservation of 68k registers and setting A5 to entry
  pointer... yikes, how did that even work so far
07.10.2019.
- [mnu2h] fixed unary +/- applied to a variable
- finished initial version of ida2asm document
- strange, I'm getting some test failures after a reboot, there could be some timing problems
08.10.2019.
- fixed tests, luckily there were no timing problems, just a side effect of new speed scrolling on click
09.10.2019.
- fixed menu glitch (it was a small error in refactoring)
- disabled in-game animations (all of them, I hope)
10.10.2019.
- tried to improve ida2asm to support remove ranges split in different files, but didn't manage to finish it
  even after a furious struggle
11.10.2019.
/
12.10.2019.
- finally made it work, now I can specify unbroken remove segments and it will be processed automagically,
  no more need to waste time on that (and in doing that switched to thread pool and removed a case of false
  sharing, I may have shaved a few ms off the running time :P)
13.10.2019.
- [ida2asm] started adding support for unlimited proc hooks, more than half is implemented I'd say
14.10.2019.
- [ida2asm] pretty good progress on unlimited proc hooks, was hoping to wrap it up today, but unfortunately
  got some other things to attend to, hopefully tomorrow is the day
15.10.2019.
- [ida2asm] unlimited proc hooks done! tested it, and it works very well + custom names for hooks are really
  great, finally renamed those awful mnemonic names into something more meaningful; will write the
  documentation and publish it tomorrow
- [ida2asm] unfortunately realized that false sharing isn't properly fixed, well, another thing for tomorrow
16.10.2019.
/
17.10.2019.
- [ida2asm] finally fixed the damn false sharing... it was pretty hard, as it involved fixing class design
  and a lot of pointer arithmetics... but it was fun :)
18.10.2019.
- converted sprite drawing routine to C++ after a long struggle... SWPE was a huge help at this
19.10.2019.
- bench routines seem to use sprite drawing routines of their own, at first I tried to convert them but that
  proved to be a too massive step, so I will keep some temporary code to route their sprite draw into the new
  routine that I wrote until it's all nicely converted and cleaned up
- need to research this a bit more, and find precise connections between 320 -> 336 -> 384
20.10.2019.
/
21.10.2019.
/
22.10.2019.
- started reconstructing highlights menu
23.10.2019.
- fixed menu mouse selection being able to select disabled items
- fixed highlights not exiting on fire
- fixed saving highlights file with double extension if selecting a filename from the list
- reimplemented highlights saving
24.10.2019.
- fixed tests broken yesterday
- covered saving file by selecting file from file list with tests; I want to emphasize once again how gross
  patching the global load file routine is to save selected files pointer
25.10.2019.
- reimplemented SaveCoordinatesForHighlights and hooked it up with replay vector, but haven't tested it yet
26.10.2019.
- fixed rerouted replay, but getting reminded now of how replays work, it's not as simple as I initially
  thought, will need to reorganize it a bit
27.10.2019.
- implemented replay scheme, it's not really working yet, but felt like in good old SWOS++ days there for a
  moment ;)
28.10.2019.
- added auto save replays option
29.10.2019.
- implemented actual auto-saving the current replay file
- and the replays are finally working!! :) still need to test a few more edge cases, but it's looking good
30.10.2019.
- fixed invalid filename for auto saved replay file, and not saving it in binary mode (oops!)
- fixed invalid logic when aborting load/save
- saved replays seem to be corrupted :/
31.10.2019.
- refactored replays file, fixed some mistakes and finally fixed the corruption bug; but auto saved replay
  isn't saved properly when game is exited with alt-F1, that's left for tomorrow, too tired now
01.11.2019.
- auto saved replay wasn't corrupted on alt-F1 :) I broke playing replays when fixing the bench replay
  corruption bug; it's too difficult determining dynamically the point of call of InitCurrentGoal(), so I
  just added a way to remove lines to ida2asm, and removed it directly from BenchCheckControls()
- [ida2asm] fixed parsing error when hook proc was empty (but leading comma was present)
- [ida2asm] added support for removing lines, by inserting special hook name "@remove"
- added capturing in-game screenshots on F2 (file format PNG)
- in case user-assigned key conflicts with some game function key, game function key will not be doing this
  function anymore
- added fast replays/highlights mode, can be toggled via 'F'
- debug variables can be toggled via 'D'
- fixed trying to auto-save a replay if alt-F1 is pressed while watching highlights
- improved replay menu navigation when there are disabled items
- prevented menu item initially under mouse arrow getting selected (I don't like that)
02.11.2019.
- [ida2asm] handled properly cases where start/end removal range symbols are missing (e.g. they got renamed)
- bah, just realized pressing 'R' during the game messes up replay (cuts it off at the first press)
- blocked recording while in substitutes (like SWOS++)
03.11.2019.
- [ida2asm] fixed reporting same unused symbol multiple times
- transfered useful part of docs from SWOS++, now on they will be kept in this repository
- debugged 'R' killing replay problem but no success
04.11.2019.
- moved replays to its own "replays" dir, should probably do that for other types as well later
- still no solution to the replay bug, what could be so different in playback?
05.11.2019.
- [ida2asm] fixed nasty and subtle memory overwrite bug in StringMap, didn't allocate 1 more byte for the end
  sentinel node string content
- changed "REPLAY" text after friendly game to "PLAY AGAIN" (I think it was confusing considering the usage
  of term "replay" for watching saved games)
- oof, fixed at least a part of the replay bug, so a short replay with 1 'R' works now, but the longer one
  with more doesn't
- omg, FINALLY fixed the damn thing; if 'R' is pressed during the game, game switches into instant-replay
  mode, it will replay whatever is in the current hil buffer and will inevitably overflow the buffer (if not
  interrupted), and our poor class will think the buffer was filled with new data and will save entire
  contents to replay, which is a double problem: not only will it save unnecessary repeated recording, it
  will also pick up -1 marker from the buffer (left by the last saved coordinate), and that will make the
  recording later stop at that point when replayed; so I think it's fixed now, only thing that concerns me
  a bit is that I managed to get a crash once when pressing 'R' near the beginning of the game: currentHilPtr
  was null which could only mean that RestoreHighlightPointers() was called without calling
  SaveHighlightPointers() first, which could happen in case numReplaysInHilFile was 0, which I have no idea
  why would be 0...) but I never managed to reproduce it so it might have been something temporary; will
  maybe try some more later... pheww.....
06.11.2019.
- fixed glitch that was preventing startup in release mode (failing to read one.256)
- "please wait" text when enumerating video modes will now only appear if it takes longer than 333ms
- hid mouse cursor when playing the game full screen
- fixed crash at the start of the game, not sure if it's the same thing as yesterday, this was when the
  sound was off but StopAudio() was called which called Mix_HaltChannel and apparently SDL_mixer doesn't
  like that when it's not initialized
- fixed text alignment in video options menu
- added pause at stadium loading screen (can be disabled via command line)
07.11.2019.
- working on converting UpdateTime
08.11.2019.
- -//-
09.11.2019.
- -//-
10.11.2019.
- finally finished converting UpdateTime! it took longer than expected, in the future conversions like this
  should best be avoided (even though it is the ultimate goal, but it's just so error prone that it
  shouldn't go into any build that has to be bug free)
- making two screenshots in succession (same second) would result in 2nd overwriting 1st; added milliseconds
  to the filename to fix that (if you do make two in the same millisecond you're out of luck)
11.11.2019.
- not much, but explored the idea of C output writer, and wrote some skeleton files
12.11.2019.
/
13.11.2019.
- generated struct & define file in C ;) some stuff is hard-coded assuming ASM file will be generated, so
  fixing that is gonna be the next goal
14.11.2019.
- fixed ASM assumption stuff, started crunching the instructions, finished push/pop instructions
15.11.2019.
- suddenly started getting some garbage in tokens in ida2asm, thought it's some new gruesome bug, but it
  turned out that IDA 7.0 (to which I upgraded ;)) adds BOM to exported ASM
- new IDA adds Unicode symbols for up/down arrows, copied those into output, it's looking nicer now ;)
- implemented cbw/cwde/conditional jumps
- need to figure out a good way to fetch operands generically for all instructions, it would make things lot
  easier afterwards
16.11.2019.
- still fighting with mov instruction, it's quite nasty
- added original instruction as a comment, it's pretty useful for debugging
17.11.2019.
- testing initial decomposition of instruction parameters (addressing modes & stuff),
- extended tokenizer to recognize parentheses as delimiters, to avoid "(offset" ending up as one token
  (thank goodness for tests, otherwise I don't think it would be possible); comparing generated assembly,
  seems the same, hope it didn't break anything :)
- phew, 1st phase of parameter parsing is OK, source and destination are extracted, now to generate C code
  properly out of those data
18.11.2019.
- some very nice progress! mov instruction seems to be outputting just fine, and added an OR instruction
  output together with setting flags
19.11.2019.
- found out that instruction operand sizes haven't been set correctly in some cases, they weren't used much
  before (or at all) so it slipped through the cracks; fixing it as we go
- working on making CMP instruction reality, detecting flag conditions was annoying but I think I got it
20.11.2019.
- handled global level instructions - have put them into automatically generated function (with name
  containing auto incrementing integer)
- handled lookup of variable size (needed for cases like: cmp g_gameType, 4), also added lookup when structs
  are used without size prefix (e.g. cmp [esi+MenuEntry.entryType2], NO_FOREGROUND)
- CMP is almost there! (+ refactored and fixed bunch of stuff that lead to it)
- CMP done! + did a bunch of small things
21.11.2019.
- implemented INC, AND, XCHG, SUB, ADD
- now new line is properly inserted after a label, but not if it's already there (say from goto)
22.11.2019.
- implemented MUL, DEC, MOVZX
23.11.2019.
- implemented DIV, TEST, JNB
24.11.2019.
/
25.11.2019.
- implemented JA, SHL
26.11.2019.
- implemented SHR, XOR
27.11.2019.
/
28.11.2019.
/
29.11.2019.
/
30.11.2019.
/
01.12.2019.
/
02.12.2019.
/
03.12.2019.
/
04.12.2019.
- implemented rotate instructions, INT, NEG, LOOP, MOVSX, JL, JLE, IMUL
- oops, it seems that loop wasn't flagged as a branch instruction in the tokens list
05.12.2019.
- implemented IDIV, PUSHA, SAR, MOVSD, CDQ, NOT, POPA, MOVSB, OUT, STOSB/D, STC, CLC, IN, CLI, STI, POPF,
  CLD, SETZ, STOSW, MOVSW, probably missed some...
- but finally all the instructions are handled!!
07.12.2019.
- got some initial version of data output, but it's probably lacking badly
- trying to compile, but there are a lot of errors, fixing
- currently ran into a problem with accessing labels before the definition point
08.12.2019.
- did an extra first pass and forward declared all the data and functions and also fixed a bunch of
  compiling errors
09.12.2019.
- classified labels properly, no more errors there, fixed bunch of other compiling errors, error count is now
  at 20-30ish with only 2 known cases to fix (albeit a bit tricky)
- I slipped with failing to mark some static buffers used by multiple threads as thread local, and was
  getting weird random null bytes in output, but always at numeric offsets converted from struct fields,
  it looked pretty funny ;)
10.12.2019.
- implemented horrible hack for switch in ConvertMenu, I simply didn't see any other way that wouldn't
  include extremely time consuming implementation of flow analysis (let's not go there)
- fixed bad generated code for add/sub/cmp
- fixed bunch of small issues
- getting close to clean compile, but still there are some errors to fix
11.12.2019.
- fixed a bunch of stuff... can't remember which... battery low... but the thing is not far from finish,
  I see the same errors related to struct access that plagued assembly output writer as well
12.12.2019.
- out() wasn't outputting a number if it's a zero... what a shameful mistake all this time >_<
- fixed struct variables problem, another gross hack
- implemented local variables and fixed some more stuff I can't remember now
- errors shrank even more, really hoping to finish it tomorrow or the day after
13.12.2019.
- only one file left to clean... ONE... unless I die first
- and the damned C converter is finally done, 2.3k lines and about 4x the size of the ASM counterpart
- only one crash with changes this big... not bad ;)
14.12.2019.
- VS build system is too retarded to support different projects building the same files, so I'll just create
  a separate *.sln to build with generated C files
- and after numerous ordeals it's finally compiling and building! :)
- now all that's left is the integration, connecting flags to VM flags, already figured out a nice way, will
  abstract it with macros and replace all naked ASM (if it's possible ;)), and of course debugging the thing
15.12.2019.
- integrated fully with the code (parts that mess with zero flags), now debugging
- something weird is happening, seems like compiler is moving parts of string pool to non-contiguous memory
  locations :/
16.12.2019.
- trying to force string pool into contiguous block of memory by turning it into a struct; all variables
  access will be turned into struct fields access; easier said than done ;) plenty of problems, couldn't
  finish it today, but hopefully it will fall tomorrow
17.12.2019.
- after many setbacks finally got the string pool as struct set up, very close to compiling the thing again,
  now getting 13 (bad luck!) linker errors, type of extern seems to be different than the defined variable
  for some reason
- finally fixed string pool, now getting infinite loop :P seems one level of indirection is missing when
  using brackets, that will have remain for tomorrow
18.12.2019.
- was inverting zero flag, oops :)
- also fixed some indirect access
- movs/stos/loop instruction were incorrectly implemented: bumping pointer before the write, always
  incrementing by 1 instead of 1/2/4, and not reflecting pointer increments back to esi/edi
- something's broken in DoUnchainSpriteInMenus()
19.12.2019.
/
20.12.2019.
- seems the culprit is invalid offset calculation in structs (mistake in Token::toInt() implementation
  :facepalm), fixed it and now there's an infinite loop inside bubble sort in InitializeTacticsPositions()
21.12.2019.
- carry flag calculation in CMP was wrong, additionally it was in the wrong spot for SUB/ADD (after
  destination gets updated instead of before)
- argh more pointer table problems... if they're not contiguous it's gonna crash, I'll have to solve this
  thing in some kind of generic way
- some asserts started firing, seems instruction size wasn't being determined correctly when one of the
  operands was a struct field (e.g. mov eax, [esi + Struct.field] or move [structVar + Struct.field], 42)
22.12.2019.
- fixed instruction size
- realized there will need to be some changes to the architecture to accommodate generic contiguous tables,
  current hacks simply won't do
- transforming sources in preparation of contiguous tables gathering, we'll need to mark no-break tokens
  [done], then create lists of ranges & string sets of removed variables for each chunk, and merge those
  individual tables into read-only global one (done at resolve reference time) which will be finally used
  when outputting (so each chunk will have complete information and those ugly tables header per file can
  be eliminated)
23.12.2019.
- very close to finishing the damn contiguous variables support:
    - created a list of user defined types for externs in input symbol parser
    - added support to mark data items as contiguous (only start & end), and wired it to parser
    - ignored externs belonging to other file tables during externs resolution phase
    - just one global header is created for the structures, right after the output is done (it's a perfect
      spot as all the information is available and it doesn't parallelize well)
    - when outputting the file user defined type overrides auto-detected type from the assembly
        here we have a problem, as types might not match (int variable vs array) and there are also
        empty array dimensions (can't have those inside structs) + need to debug some
24.12.2019.
- it's finally compiling with contiguous variables support!! hallelujah!!! but... it's still crashing :(
  (we're back to InitializeTacticsPositions())
- after a long fight got it to run without crashing, but with messed up strings and keyboard not functioning;
  the problem lies in data alignment, C compiler does whatever it likes with it, lays it out in unpredictable
  way, while the code assumes it will be contiguous without alignment; the game uses huge number of tables,
  and marking them manually will be a lot of work, my hope is that some compiler specific switch could be
  discovered and make this problem go away
- so either a compiler switch, or shoving _everything_ into structs (ugh)
25.12.2019.
- put 68k registers near x86 ones to improve cache coherency
- implemented multi-line array collapsing into one line, but the menu is still messed up :(
26.12.2019.
- found out why the menu text is messed up, char tables have a struct in C++, but not in ASM, since IDA
  doesn't declare structure instances properly, it just lists the fields as if they were consecutive
  variables, this'll be tough to cure
- current solution is to just leave struct variables with their ASM type, but cast them inside C++-facing
  define, tried as I might, but had to leave it for tomorrow :/
27.12.2019.
- found out that prefix feature in symbols.txt wasn't used (woops) and removed it (this simplified things a
  bit); it was used in SWOS++ but the things worked differently there: based on map file assembly file was
  generated with symbols corresponding to offsets, so we could practically generate any symbol as long as it
  had a correct offset to match the original SWOS variable in memory
- going crazy with all the typecasts (from ASM to C++ types in defines for structs vars)
- fixed text output in menus!! hallelujah! still, keyboard isn't working and menu items aren't rendered
  properly :D
28.12.2019.
- found out why controls weren't working: I was actually using keyboard variables from SWOS as if they were
  contiguous (as a struct) in my code, hihi, just added no-break for now but it'll have to be changed for a
  new architecture
- also found out that contiguous variables problem extends to menus (their packed form), for now will detect
  them and add contiguous flag automatically (have only just started though)
- a proper solution would require some sort of code layer for accessing the memory (a virtualization of
  sorts); still have to figure out all the details, and it will take foreva to implement... but this is what
  will make iOS and Android ports tick
29.12.2019.
/
30.12.2019.
/
31.12.2019.
/
01.01.2020.
/
02.01.2020.
/
03.01.2020.
/
04.01.2020.
/
05.01.2020.
/
06.01.2020.
/
07.01.2020.
/
08.01.2020.
/
09.01.2020.
/
10.01.2020.
- did some theorizing on the new memory layer technology, it's not all that frightening
11.01.2020.
/
12.01.2020.
/

....

13.01.2020. - 19.05.2020.
- big break period, lots of changes at work, been trying to get into Android development, will continue
  trying, maybe making a career switch (Kotlin+NDK might give a good edge and allow me to find good remote
  jobs easier) and all that will most definitely help Android game porting efforts ;)

....

20.05.2020.
- sorted out game docs a bit, needed to look up some things and realized it's a bit messy
  it's not easy translating soccer terms, even had to look them up on soccer for dummies :D
- feels really good to be back in VS2019, it's just so much better than VS2015
- reversed DoAI() a little bit, on to something here perhaps, but there's more work to be done
21.05.2020.
- went through Meson release logs, seems it has improved a lot, will give it another shot
22.05.2020.
- today I learned that ARM _does_ support misaligned memory access :O however, it only pertains to modern
  ones (so it might still crash on older one), there is a performance hit, and some other potential problems,
  so it should still be avoided
- Meson is a bit skimpy on the tutorial-style documentation, and I suspect VS support is poor, which would
  force me to improve it myself and that might take prohibitively long time; instead, I might just create
  build scripts with ninja in mind, and simply maintain VS project files separately; this might just be
  satisfactory solution in the short term (and give me time to potentially improve VS support gradually,
  well, maybe ;))
23.05.2020.
- went through Meson manual and source code
24.05.2020.
- accomplished massive progress in Meson scripts; will take it in steps:
    step 1 - win32 version/asm
    step 2 - win32 version/C
    step 3 - Android
    step 4 - iOS
  so far working on step 1 :) gotta fix up the menu compiler
25.05.2020.
- moving forward with Meson scripts, very rough outline is done, now ironing out the quirks, will need to
  reorganize script locations a bit
26.05.2020.
- advanced further, there are some problems with include directory paths, on it atm
- finally got the Meson Manual book after some shenanigans, thanks Playa! :)
27.05.2020.
- oh dear, I seem to have broken career loading... 5 months ago x_x
  luckily it was a small oversight, just used a wrong register in what was supposed to be a fix for another
  thing :)
- added prompt asking the user if they really want to play with the mouse... hopefully this will make
  getting into the game clearer for the players, so they can let poor Playa breathe a little :)
- finally compiling without errors using Meson, and it even works without crashing!! :D
  it's only annoying me by recompiling needlessly, will need to find out why's that happening
- phew, solved it! it seems the problem was in passing absolute paths to Meson; Meson turns path into some
  weird identifiers for ninja, and when they're absolute they start with C: which ninja eliminates in file
  name, but not in its internal id, and the result is that it never can find the files after the build (on
  disk they look something like _blah_blah but ninja is looking for C_blah_blah)
  had to resort to invoking Python instead of cmd to get the source file paths recursively and in relative
  form (Python has to be available since it's needed anyway for the build and Meson itself)
- I'm amazed how elegant ninja build is, quite a slick little software
- so step 1 of the plan finished, more to come! ;)
28.05.2020.
- ops, still need to add tests to the build; on it
- moved all the Meson scripts to main branch (the test succeeded ;))
- extended backup script to backup meson build files too, and went back to regular backup scheme
- replaced cmd calls with Python so the globbing is now portable
29.05.2020.
- refactored build scripts a bit, working on tests, it's more difficult than anticipated but it's
  coming around
- tests are built!!!
- but when I ran them, one test was crashing, but only in release version, debug was just fine... after hour+
  of debugging, eventual inspection of generated code showed that the optimizer was eliminating the code to
  save selTeamsPtr after it gets overwritten when loading teams from file... for f@#$&! sake (seems even the
  compiler thinks it's a garbage code)
- fixed some mistakes in the test code when running without --swos-dir parameter (directly from the game dir)
- had a hard time fixing up tester in regard to SDL address fetcher DLL, but made it, now the tester fails
  some tests, but those will have to be dealt with later
- found a small bug in Meson along the way
30.05.2020.
- it's so devilishly difficult to debug non-VS-built executable from VS, but copied Meson-built debug exe
  and pdb over its, bumped timestamp, pressed F5 and it worked perfectly :D
- finally made it, tests are passing!! it was some weirdness in the order of the object files sent to the
  linker: if test files are linked first, SWOS_STUB_MENU_DATA seems to be defined when it shouldn't and
  stubbed menu routines will be linked in the wrong file (the file that uses the real ones); not really sure
  why is this happening but rearranging linker order solves it
- update: I've stopped defining the menu in stubs mode, so now it doesn't depend on the linking order, but
  it's still a mystery, I don't think it should have happened in the first place
- generated *.map file and checking it out, quite interesting, we get
    0005:00005780       ?selectFilesMenu@@3USWOS_Menu_selectFilesMenu@@B 0080f780     selectFilesMenu.obj
    0005:001475b0       ?selectFilesMenu@@3USWOS_Menu_selectFilesMenu@@B 009515b0     SelectFilesMenuTest.obj
  the decorated name is the same! could this be a bug in the linker?
- talked to a friend to see if I'm crazy, turns out I'm not (yet :))
  tried a minimal example with gcc, it works so it's definitely a MSVC++ bug!
  updated to latest Visual Studio, they solved it... so much for that :P
- learned about Meson Filesystem module, and improved the scripts accordingly
31.05.2020.
- had an interesting idea, how about making a translation into ARM assembler? it would still have
  misalignment problem and might not work on older CPUs, but it would be so much faster and simpler than C
  conversion; will try to make a proof of concept and see if it will work properly without proper alignment
01.06.2020.
- there's quite a bit of stuff to read on the ARM architecture and its assembler
02.06.2020.
- learning about ARM and its architecture, although haven't managed to read much today
- damn it, if I use 64-bit architecture then I'll need to fix every pointer access, and if I use 32-bit
  architecture then I have to fix every misaligned memory access... ARGH
03.06.2020.
- the way forward is to focus on memory indirection system (and flow analysis for simple optimizations),
  from which both C and ARM optimized version can be developed
04.06.2020.
/
05.06.2020.
/
06.06.2020.
/
07.06.2020.
- finally read a good introduction to ARM architecture, a chapter from a reverse engineering book
08.06.2020.
/
09.06.2020.
/
10.06.2020.
- working on getting the C output converter done; removed the old code and started from scratch, it's been
  tough so far, trying to assemble a kind of a register containing all the variables in the program, which
  will later serve as a main data structure for generating all the stuffzorgs
11.06.2020.
- just realized that ida2asm can be compiled with C++17, since it doesn't need to run on XP (only the main
  SWOS port executable needs to, so it can be the only one compiled with VS2015 toolset)
- made all the plumbing up to marking of the redundant instructions, will leave that for tomorrow, it will
  require devising a way to track all the register contents as well as knowing when each instruction destroys
  them
12.06.2020.
- was definitely doing something, but forgot to type it in and now can't remember what it was
13.06.2020.
- laid ground for instruction operand type parsing
14.06.2020.
- wrote operand type extraction code, now trying to come up with values to assign to registers to track
  their usage; it's more difficult than anticipated, but it's moving slowly
15.06.2020.
/
16.06.2020.
/
17.06.2020.
- wrote register assignment and value propagation logic
18.06.2020.
- worked on setting up variables tracking
19.06.2020.
- returned old COutput :) will remove struct tables from it, and add a new variable handler
20.06.2020.
- seems there's more stuff to remove from COutput, but it will be more clear once the data bank conversion
  is close to completion
- wrote initial implementation of data bank variables parsing
- found that structs were not being handled properly (bit inefficient), and they're being written by multiple
  threads, so rewrote them a bit; now they're a prime example of purity
- created variable to offset mapping, ready to be used by the code generator
- planning to extract the instruction emulating functions into a class of its own, and do some modifications
  required for memory layer to work; also have to integrate intermediate code into COutput and finish
  optimizer
21.06.2020.
- broke everything :)
- finished rough initial version of memory array output, untested though! (until I sort all the mess)
22.06.2020.
- already evening, and finally it's compiling again (compiling but not more!)
- fixed barrage of asserts, broke the build again, fixed it
- assertions are pure gold, they should thrive and multiply
- fawk! I didn't consider pointers to code, only data... must rethink this
23.06.2020.
- it's not that big of a problem actually, figured out a decent solution I think: will keep a separate table
  of function pointers and replace any address with index into this table, since there are no arithmetics on
  values of function pointer it should work (we incur additional memory access each time a function pointer
  is used, but it shouldn't be a big problem, they are used relatively rarely and are expensive anyway)
- this seemingly never ending rain seems to do wonders for my productivity ;)
- phewww, finally made it through the crashes and asserts, got the output file, of course it's wrong :P
- I'm very glad to be able to remove the switch table hack, with the new proc invoke system this case will be
  handled automatically
- parsing of integer values in tokens was broken all this time, incredible...
- found a weird bug in IDA, it outputs extraneous semicolon if the comment contains one when exporting ASM
- memory array looks great :) procs array not so much, but no time left, gotta get some work done, will fix
  it up tomorrow
24.06.2020.
- first time to see the sun in days
- I might be able to remove gross struct hack as well, but it might still be too early
- and finally, data and proc arrays look good! :) at least I can't find any mistakes, we'll probably see more
  once the compilation starts, but this is it for now, therefore I officially pronounce phase 1 finished ;)
  now on to actually using this lovely juicy data to make the game moving >:)
25.06.2020.
- figured out how to rework instruction generation, but haven't got around to actually do anything
26.06.2020.
- begun converting instruction generation code
27.06.2020.
- continuing with instruction generation, it's pretty rough, discovered that offset integer parsing didn't
  account for hex offsets and was therefore producing completely wrong offsets; no wonder it was crashing
- finally had a good idea how to generate more complicated instructions with memory access
- so much to do... want to write more... but must... sleep...
28.06.2020.
- d-oh... function pointers can be referenced from the code directly, not just from data... must capture them
  as well
- replacing MOV instruction, but there are still some failing cases
- fixed generating wrong addresses for variables & added a check so it doesn't go unnoticed again
29.06.2020.
- MOV is looking pretty good aside from some small things, can't wait to fix it all and move on to
  implementing other instructions... heat was exhausting these days, will have to service air conditioner
  if this hellish weather continues
30.06.2020.
- MOVSX working
- turned single byte dynamic access via function into a direct byte array access, since 1 byte access can't
  be misaligned, so it's a bit simpler now
- reworked memory array into union of three arrays that can be accessed with three variables, as byte, word
  or dword array as needed (simplifies access code)
- implemented initial read/writeMemory functions
- MOVSB/MOVSW/MOVSD implemented
- removed direction flag
- STOSB/STOSW/STOSD implemented
- bumped into and removed some unused functions
- added debugBreak() function instead of INT 3, it should trigger a breakpoint and is compiler-dependant
- fixed some small issues
01.07.2020.
- LODSB/LODSW/LODSD converted
- implemented function calls
- refactored a bit
- PUSH/POP converted ("small" handled as well)
- OR/XOR converted
02.07.2020.
- CMP/SUB/ADD converted
- INC/DEC converted
- XCHG converted (phew, that was a tough cookie)
03.07.2020.
- NEG/NOT converted
- DIV/IDIV converted
- SHL/SHR/SAR converted
- only rotate instructions to go! they're by far the toughest though :P
04.07.2020.
- phew, RCL/RCR/ROL/ROR finished, that's about it, now let's see if the code can be optimized
05.07.2020.
- eliminated redundant flag assignments (when an instruction sets the flags, they never get used, and a
  subsequent instruction resets them); quite content how well this works and how quick it was to implement
- working on redundant assignment elimination, set it up in theory, sounds solid, trying to turn it into
  implementation
06.07.2020.
- moved forward with redundant assignment elimination, refined the plan some more
07.07.2020.
/
08.07.2020.
/
09.07.2020.
- resumed working on optimizer code, moved it a bit forward
10.07.2020.
- sort of finished, but lots of debugging ahead
11.07.2020.
- woops, forgot other instructions than MOV ;) but it's a good progress nevertheless
12.07.2020.
- working on handling instructions that change state, quite a lot to handle there
- there's still stuff to be done on the "simulator", I'm hoping to wrap this all up over the incoming week
13.07.2020.
- implemented stack operations (untested though)
14.07.2020.
/
15.07.2020.
/
16.07.2020.
- implementing block instructions, interestingly, LODSD was missing all this time
17.07.2020.
- finished with block instructions, they're looking good now :)
- introduced new Value abstraction and made things a LOT easier, seems good ideas only come after a
  significant effort
- omigawd, finitto! (minus the debugging :P)
- found a problem with extractValue()
18.07.2020.
- fixed extractValue() problem (was surprisingly easy), and a bunch of other small bugs
- found out about and fixed flow change instructions that weren't being marked properly
- stack is giving me headache, there are push/pop instructions executed conditionally :/
19.07.2020.
- fixed stack (simple idea again, to duplicate it for each branch) and a bunch of small issues
- realized IMUL slipped through the cracks (the notorious three-operand instruction)
- refactored a bit so the code is a less of a monstrosity
- ran into interesting thing: my lovely jovely stack tracer pointed to a stack imbalance inside
  FillManagementRecordInfo(), so I checked it manually, and am pretty sure it's a faulty code; it should
  crash when there is no best scorer in the season; there is a test if best scorer string is empty, but
  when I looked, the string has value "SEVERAL", so it might be a different bug preventing the first
  one from manifesting ;)
  will patch it up later just in case
- finally everything is passing without triggering any asserts, but we're not out of the woods yet, I see
  some invalid looking things in the output file
- gah, my implementation of expressions was too simplistic, I'll have to rework it tomorrow (or whenever
  the next time will be)
20.07.2020.
- refactored code and simplified it a lot, it's more manageable now (removed extraneous data structures and
  functions), shaved off ~200 lines
21.07.2020.
- ...aand finished (yet again) but it's still generating invalid code, let's put our improved debugging to
  some good use
- fixed local variable output (the only one ;))
- fixed nasty bug where I didn't check if operand string in OperandInfo wasn't empty first, before doing
  anything; and quite annoyingly, it was only manifesting in release build
- there's still (another) crash happening in release build only :/
- after a little bit of desperation did the most stupid (but effective) thing: commented out functions one
  by one, and soon pinpointed it to assignRegisters() then to widenRegister(); it was an invalid index
  arithmetics, and it was starring into my face all the time... sigh, moving on
- applied bunch of little fixes, and hallelujah! finally can't find anything wrong in the output (or maybe
  I'm just tired and couldn't see a white cat on a sunny day)
- tomorrow will add orphan assignment remover and then the next step is compiling it :)
22.07.2020.
- orphan assignment remover turned out to be more complicated than anticipated
- fixed invalid constant detection
- fixed expressions involving unknown memory addresses that were acting up
- removed ADD/SUB xxx, 0 instructions
- made flags optimizer respect deleted node flag
23.07.2020.
- refactoring operand info extraction to be ready for assignment remover code to fit in
24.07.2020.
- discovered 's' suffix for std::string creation, what an awesome thingie
- refactoring done, but dreaded error is back, now it won't even crash in release, just throwing exception
  when invoking a worker thread
- seems my debugger wasn't set up correctly to capture some of C++ exceptions, it should be fine now (and
  fixed the error)
- finally the refactoring is done, and the output file matches the old one, except it's better since there
  were some bugs I fixed along the way; road to orphan assignment removal cleared!
25.07.2020.
- been developing orphan assignment removal, got close to finish and the start of debugging
26.07.2020.
- added CBW/CWDE/CDQ
27.07.2020.
- didn't have too much time today, worked on MUL
28.07.2020.
- finished MUL/IMUL/DIV/IDIV
- "done", but need to actually connect it with the rest of the program
29.07.2020.
- realized mul & div's weren't handled properly, fixing
30.07.2020.
- passed all asserts
- wrote test cases
- found out the hard way I haven't checked if the proc was already open when encountering endp inside the
  parser (made a mistake in test input); though it should never happen in automatically generated IDA code
- fixed CBW/CWDE/CWD/CDQ
31.07.2020.
- realized I haven't maintained lists of connected instructions properly, so separated links and reference
  counts and created new links when appending
- after the smoke has settled from all the debugging, ALL THE TESTS ARE PASSING! WOOHOO!!!
- discovering more problems in output files, there's still some work to be done before trying to compile
- finally, can't find any more problems, it's time for the next phase, gotta get this thing to compile
  and start game-testing :)
01.08.2020.
- started compiling the generated code, and fixed TONS of small mistakes
- compiled it, but darn, there are linker errors due to the fact that all SWOS variables are now contained
  in an array, and we need to access them from the outside code; must figure out something to handle this
02.08.2020.
- just learned that a void function can return another void function... as well as any void type... seems
  it's like that so the templates with generic return types would work, wicked
- started working on solving the outside access to SWOS variables array, don't have all the details figured
  out yet, but hope to carve them out as I go
03.08.2020.
- been converting direct memory access to SWOS variables from outside to indirect; ugh, this will be really
  rough
04.08.2020.
- solved problem of words (maybe but probably not), haven't ran it yet, I see that interoperability between
  SWOS and non-SWOS code is jeopardized, pointers are especially sore subject, I'll have to come up with
  something, maybe some bridge routines
05.08.2020.
- converting SWOS variable access with templates, down to 117 unresolved externs!
- char arrays converted, 107 externs to go
- void pointers: 98
- yipes, forgot about pointer difference: pointers are 4 bytes in SWOS and 8 bytes in a 64-bit system, and
  they and/or stuff they point to could be misaligned, so there are two levels to take care of... will have
  to devise some convenient interface to handle all of this
- another tough problem: how to handle buffer extensions for pitch patterns and so on?
06.08.2020.
- all right, after some rumination I think I have a reasonable plan to deal with the memory probljem: first,
  the additional memory allocated when the game starts will be joined to the g_mem array (at the end), there
  will be an interface to get its size and pointer to the beginning, and the size should be configurable via
  a command line switch; second, pointers will be coded into 4 bytes: highest bit clear: typical SWOS offset
  into g_mem, highest bit set: following bits will be an index into a pointer pool (set say at the g_mem end,
  right before extra memory area), remaining bits will be the offset and together with the stored pointer
  would form the real pointer to the data... sounds nice in theory, let's see if it actually works ;)
- added support for specifying extra memory size and disabling optimizations from command line, and basic
  variables for SWOS extended memory
07.08.2020.
- finished converting access to extended memory, and with pointer arithmetics (luckily, they weren't too
  heavily used), now the new problem is how to handle struct member access, since they too can be misaligned,
  by starting address as well as by internal variable ordering (which I can not touch since the SWOS expects
  it that way); most likely the approach here would be to replace variables with functions, or to have
  essentially a collection of variables instead of a struct (teamData.playerNumber() or
  teamData_playerNumber.get() or teamData.get(kPlayerNumber)... #1 looks best IMHO)
- trying to handle structs, it's getting complicated
08.08.2020.
- struggling with structs, tried & rejected new approach
09.08.2020.
- dwelled deep into dark art of templates, but haven't managed to finish struct access yet
10.08.2020.
- fixed a small bug only appearing in release mode, accessing all opInfo members, even if there are none
- feeling somewhat better today, yesterday evening was a disaster, a food poisoning or an allergy attack or
  both :/ nevertheless made some progress, but things are taking a turn for the uglier, I can't properly
  assign types to automatically generated structures, so I might have to manually create them, which is
  quite unsatisfactory as well... will need to think a bit on this
11.08.2020.
- was mostly resting today, but did finally decide on the issue of structs, they will remain as they were,
  and the client will have to take care of the alignment (sucks to throw it on the client, but they are
  heavily customized and there is a similar situation already with SAFE_INVOKE macros), will add some
  templates later for safe generic pointer manipulation; it also means most of the code I was writing past
  days had to go, painful but it's for the better in long-term
- also read about packed structure access, seems that the compiler will take care of unaligned access, which
  makes my life a lot easier (and has influenced the decision, since only the pointer itself will need
  adjustment and the compiler will take care of the rest)
- with this intervention it's compiling again and down to 71 unresolved externals
12.08.2020.
- fixed a fix for accessing all opInfo members
- moved forward within new direction; planning to add "align" directive to ida2asm so important variables
  can have proper alignment guaranteed
13.08.2020.
- implemented alignment of all exported variables (though this might come back to haunt me if I disturb some
  of the save/load buffers, but will fix it if it becomes an issue)
- deleted a lot of code again, and reverted back to the direct variable access, only thing it's now one big
  struct with filler arrays in between non-consecutive variables, accessed via "swos." macro (e.g.
  swos.someVar)
- seems it could work, got a tons of references to fix, and to sort variable access from menu files, as they
  need to add "swos." prefix sometimes
14.08.2020.
- the cunning plan worked flawlessly, added "swos." prefix to all SWOS variables and fixed up menu scripts
  to add it as well (via $.var syntax), it even looks nice
- in the process realized it would be so much easier if generated files were C++ as well, so switching from
  C to C++ now, it shouldn't make much of a difference in portability, all the major platforms have at least
  one good C++ compiler
- argh, so close to getting a clean compile (replaced functions are treated as ordinary exports without SWOS
  namespace and thus create linker errors)
15.08.2020.
- solved SWOS:: problem, now only at 24 unresolved externs!
- gah, my hope menu switch table would be handled gracefully was shattered, even if all jumps are
  straightforward except one, it makes partitioning into separate functions impossible (too intertwined with
  ConvertMenu), will just convert the whole proc, should be fun too, haven't been converting anything in a
  while ;)
16.08.2020.
- converted ConvertMenu, but realized there is a grave problem: the MenuEntry struct contains pointers, which
  will become 8 bytes in 64-bit systems and break the layout; they will have to remain 4 bytes and yet
  somehow do their duty both in SWOS and non-SWOS code; most likely I will need to extend invokeProc array
  dynamically and use negative offsets for reference; menu scripts will have to take care of registering menu
  functions
17.08.2020.
/
18.08.2020.
/
19.08.2020.
/
20.08.2020.
/
21.08.2020.
/
22.08.2020.
/
23.08.2020.
/
24.08.2020.
/
25.08.2020.
/
26.08.2020.
/
27.08.2020.
/
28.08.2020.
/
29.08.2020.
- finally back, haven't realized it was so long, but have to do some work for the paying job from time to
  time as well ;)
- started implementing classes for interfacing with SWOS variables and procedures, got an include dependency
  hell on my hands, will need to start defusing it slowly
30.08.2020.
- tried untangling circular dependency, but failed miserably
31.08.2020.
- solved the dependency, but it was tough, introduced functions for pointer/offset conversion, and put them
  to cpp file so swos.h wouldn't need to include vm.h; the only way I see to solve this
- unfortunately now the templates are going rampant, trying to fix the mess
01.09.2020.
- managed to solve the templates, as well as pile of compile errors, back to linker errors, 8 unresolved
  externs
02.09.2020.
- removed shift by 32 to the right from rcr instruction (extraneous as well as undefined behaviour)
- unreferenced label warnings helped me remove one unnecessary label in IDA
- converted swos.h to use wrapped pointer classes, surprisingly few errors
- missed ConvertMenu reference from RestorePreviousMenu, fixed now
03.09.2020.
- fixed invalid generated string table name, and learned that C++ compiler actually accepts $ as variable
  name quite happily
- fixed mnu2h tests and covered latest syntax additions
- fixed one unresolved external, one element of the proc array was C++ function and was missing SWOS::
  namespace prefix
- facing horrible problem with insanely long compile times, I've narrowed it to the memory union, if I make
  it static it goes away, but that will require some annoying code changes, lucky I was accessing it via a
  macro so it's doable
- ARGH now it's back even with static qualifier :`-(
04.09.2020.
- finally pinned it down the slowdown to templated class SWOSDataPointer, still analyzing why the hell is
  this happening, and how could it be avoided
- it seems a template (the usual performance suspect) doesn't really matter in this case, only if I remove
  the constructor it goes back to full speed; it's quite crazy, but anyways I've created minimal project and
  reported it to Microsoft, hope they'll fix it properly soon enough, or I'll need to modify a lot of code,
  without being sure it would ultimately work...
05.09.2020.
- argh, nobody looked at my report yet, it's weekend -_- will just have to patch it up somehow until it's
  properly fixed
- phewwww, found a satisfying workaround! I've thrown out union temporarily (since I only need it to
  guarantee the alignment of the data, and that I can forego temporarily during the development -- x86
  swallows anything :D); now I'm using raw array with few pointers pointing into it (not gonna worry about
  aliasing either), and it's compiling fast again! this will be good enough to unblock me until the proper
  bug fix (also turned off assembly listing generation for a small additional speed up)
- finally back on track, debugging invalid generated types of SwosVariables struct
06.09.2020.
- fixed natvis definitions for Token, seems something might have changed between Visual Studio versions
- joined terminating zero to its parent string (so the sizeof operator would return correct size now)
- fixed array dimensions in SwosVariables
07.09.2020.
- expanded natvis script with descriptions of StringView and it's Node, need to debug it since its behaviour
  seems suspicious (especially duplicate elimination)
- worked on eliminating duplicate functions in proc array, as well as comparison with outside functions; got
  sidetracked but luckily those function pointer variables got eliminated, so there wasn't any work left for
  this matter
08.09.2020.
- discovered that chant function pointers weren't needed in the SWOS code (removed/replaced all the functions
  that used them), so removed them and replaced with a C++ array
- converted raw pointers in SwosVariables to SwosDataPointer's, now fixing up the rest of the code, wherever
  there's some compile error
09.09.2020.
- omg, FINALLY a clean compile!! (even though there's plenty to do it's still a nice landmark ;))
- fixed duplicate proc's in the proc array and other smaller mistakes
- now have to figure out how to reconcile using menu variables from both SWOS and C++, since the pointer size
  is potentially different... tough problem, will need to think hard on this
10.09.2020.
- the bug I reported is under consideration, got a reply to try making constuctor constexpr, which works in
  simple example, but unfortunately it wouldn't work in the real project (maybe I've missed something, or
  something else triggers it, such as copy constructor)
- started working on a system to add external pointers into SWOS VM, they will have the highest bit set and
  be treated specially, that should reconcile SWOS and non-SWOS menus
11.09.2020.
- implemented simple memory allocation system to support mixed menus + system for SWOS VM pointers that can
  access outside memory, we'll see how it will fare in practice ;)
- implemented safe fetch()/store() for 8-byte pointers
12.09.2020.
- implemented registering user procs with SWOS VM
- updated verifySafeMemoryAreas() to check all newly added safe areas
- fixed a bug in convertMenu(), didn't bump data pointer when handling custom foreground function
- implemented native menu codes (to support out-of-SWOS menus)
- starting with mnu2h and menu system modifications but it's revealing more complex than I thought;
  lucky I took over convertMenu() or it would be impossible; and it's even greater luck I wrote a little
  language for describing menus, which allows this big change without myself going insane (just barely)
13.09.2020.
- created Offset and Procs enums in vm.h and expanded procs with exported ones
- begun converting mnu2h to support new stuff
14.09.2020.
- my two week vacation begins! let's push this far! ;)
- moved mnu2h conversion further, now using new enums but still need to fix up StringTable (and maybe few
  other smaller codes) so it's possible to handle mix of contained SWOS and non-SWOS pointers
15.09.2020.
- implemented C++ classes for new native menu codes
- updated output from mnu2h to detect and generate them (except for string tables)
- added check for menu headers to report error if functions are mixed SWOS/non-SWOS (luckily there is no
  need for such menus yet)
- pushed plenty of changes to mnu2h, and woah... it compiles, but too scared to run it ;)
- fixed asserts so debug version now compiles too
- fixed variable offsets off by 256 bytes
16.09.2020.
- added natvis visualization for SwosDataPointer and SwosProcPointer
- trying to fix another variable offsets mess up, it only happens with the later ones, the first ones are OK;
  seems the problem is tied with @replace section, which was introduced to help expand some buffers in SWOS;
  actually the size of the array was picked up from export section (which was inflated since the buffer was
  extended with @replace, but the variables were generated according to the old size)
- argh, @replace section was implemented on output level, by simply copying replacement to the output
  verbatim, since the syntax is ASM that worked but with advent of C++ output it couldn't be done like that
  anymore; added proper parsing of the replacement text and everything is fine again
- introduced a new check: size of exported array variables must match with the source, and already caught
  a couple of mistakes with it
- improved error reporting a bit
- even after all these fixes there's still another variable offset discrepancy :/
- pinpointed it to smallCharsTable, it's a struct variable, but one not properly declared in IDA, so it looks
  like an ordinary word, while it's imported as a CharTable (but much too late now to even try fixing it)
17.09.2020.
- fixed struct variables size in a satisfactory way, but there's still some more discrepancy :/
- it was due to convertKeysTable being interpreted as a single byte variable instead of 110 bytes array
- then there's more, currentHilBuffer is making problems -- size calculation didn't take in account base
  size of array element (dword in this case), fixed, but can you guess? something else still ain't right
- spritesIndex was the culprit, this time exported declaration had smaller size so it shifted everything up
- moving on, stadiumMenu is of PackedMenu type, and ida2asm doesn't know about it and defaults to 4 bytes...
- implemented system to report an error if an unknown struct type is encountered in exports
- adding @type-sizes section to symbols.txt so type sizes can be introduced to ida2asm (hard coding them is
  really wrong)
- argh, dword -> byte[4] conversion sabotaged the works
- stopped counting issues, but finally, offsets are matched! :)
- and FINALLY, after some months, going to run the game :) of course it crashes, so now fixing stuff on the
  fly and debugging; it's a great pleasure watching SWOS VM work, even in its current crippled state :)
- there's some gnarly bug that forces 16-bit conversion on each memory read, but it's too late now to fix,
  besides, gotta leave some for tomorrow too ;)
18.09.2020.
- my, my, what was I on to write such vulgar and unrefined code, this must be addressed at once; so it seems
  I added it to address compiler warnings, which is only fine for 16-bit access, I must have been misled by
  the sheer number of them and disregarded the other option (a lesson to take); a simple check for operand
  size did the trick and we're back to the races
- optimized generated code when assigning zero constant to memory, things like "= 0 & 0xff" and "= (0 << 8)"
  were annoying me
- added leading comments for functions to output (making them easier to debug)
- fixed removal of unnecessary "return" from the end of the proc and double empty line, those somehow got
  broken with the introduction of intermediate form converter
- fixed double empty lines before labels
- fixed jmp short missing space between local label
- converted jumps to last labels to returns (and removed the labels)
- now on to solving some mysterious crash in DoUnchainSpriteInMenus(), looks like some mess up with memory
  write indirection, but gotta quit for now; back, no big mystery, high and low words of a Register struct
  were mixed up
- good we're moving forward, now there's an infinite loop in InitializeTacticsPositions() ;)
  so it seems integer conversion rules have bitten me:
  a, b, c -> signed 16-bit ints
  (word)a - (word)b < (word)a
  left side ends up as signed, expression gets promoted to int (since it's smaller), and then the right one
  as well (but not relevant since it was positive); in the end it's negative int compared to positive and
  doing the opposite of what was intended :S
- seems some of the menu infrastructure will have to be rewritten
19.09.2020.
- managed to fix menus cheaply ;) a bit hacky but it was fast
- seems there are misaligned fields in the SWOS structs, thinking about the best way to address this, but
  first will try to enable exceptions for misaligned access on x86 somehow
- seems it's very difficult to enable AC (alignment check) exceptions on Windows, and even if successful it
  will cause a large amount of noise from Windows code itself and libraries... have to give it up for now
  and rely on my own asserts
- trying to get convertMenu() to working condition (plenty of small mistakes fixed so far)
- just my luck, found a compiler bug again (this time connected with template non-type parameter); reported
  it, let's see what happens; the previous bug is still "under consideration", it will probably die like that
- implemented a workaround, code is a bit uglier now, but no choice really, it's most important that it works
- crap, when I introduced external pointers I broke reading of a single g_memByte element, will have to call
  readMemory() on bytes as well
20.09.2020.
- added readMemory() and also writeMemory() for byte access
- got pissed of occasional crash that happens in ida2asm only in release version, found a place where opInfo
  was accessed before being initialized (for no operand instructions) and fixed it, but it's still happening,
  about once in 10-20-30 runs
- after gruesome debugging session narrowed it down to orphaned assignments remover (causes crashes) and
  redundant instruction remover (causes error in output file, could be some overwrite or something weirder);
  and now it's as if it stopped happening, giving it up for now, but it's just sooo annoying $%&#*@$!^
- ops, I overlooked the fact that pointers from the pointer pool can be incremented and manipulated; so the
  strings will have to be copied in the SWOS VM address area with the linear allocator, but the index
  variables in string tables can still use the pointer pool just fine (those pointers are constant and will
  allow updates from the UI to propagate to C++ code)
- ha, finally got to a menu screen, though it's completely broken and crashes on mouse move :D actually it's
  just the text that seems garbled & plenty of alignment asserts are triggering
21.09.2020.
- comparing sprite data after unpacking with x86 version, and it is a bit off; signed right shift where
  unsigned should have been slipped into rotation with carry routine, fixed it and now the unpacked sprite
  data is identical
- the menu is still garbled but the text looks a little bit more like a proper text :D off to get bicycle
  from the bike repair shop and then will see wth is going on :D
- dumped memory after sprite uncrunching and compared it, it's the same (save for pointers); so uncrunching
  routine has cleared suspicion and restored it's good name
- changed 8 and 16 bit registers to unsigned to avoid problems with signed right shift
- seems flags optimization was too aggressive since I changed node.flowChange flag to only include
  instructions jumped to and not jumped from (alleviated with instruction->isBranch() check)
- ops, forgot to put return in writeMemory() after writing single byte, and wooow the menu is finally showing
  up properly :D it doesn't _work_ properly, but one step at a time :D
- fixed miscalculation in registerProc()
22.09.2020.
- overrode assignment of 68k registers to automatically convert pointers into SWOS VM offsets
- fixed calling convertMenu() instead of prepareMenu() (so selected entry index wasn't converted to pointer)
- fixed invalid code generation for onSelect function with mask in mnu2h and menuCodes.h (and some more)
- added new type of menu header (v2), it differentiates from the old by starting with -2 (in onInit field);
  it should never show up in old menus; this header type supports mix of SWOS and non-SWOS functions
- fixed some more miscalculations about proc indices, and separated 0 and -1 values for pointers
- fixed not assigning memory for string that are to be allocated
- fixed bugs in natvis script
- ha, menus "kind of" work now, victory is near! ;)
23.09.2020.
- they closed my bug, it seems VC++ does some retarded things by default, but luckily it can be disabled with
  "/permissive-" command line switch; what's worse I've read the article but couldn't believe a simple thing
  like this wouldn't work by design
- realized that -2 isn't good value for menu header mark (considering VM starts procs from -2 downwards),
  changed to -100,000
- invalid codes started popping out again, but I can't reproduce it in a small project, reverting to the
  workaround and not looking back
- reworked menus a bit, eliminated g_currentMenuPtr since it could potentially point to both VM and non-VM
  address
- fixed some pointer methods I missed in Register
- woohoo! basic menu navigation works!
- now trying to get into the game but friendly menu isn't reacting; it's because pass through functions
  weren't implemented correctly (and friendly menu depended on them) - fixed
- fixed null strings wrongly set to kSentinel, causing allocation of menu space for string data, and
  starving menu buffer
- trying desperately to reach the game ;) but getting some null pointer access in SetCountryNames()
24.09.2020.
- fixed missed initialization of MenuEntry drawn field
- really fixed pass through functions, this time for real
- removed extraneous "return" when jumping out of the proc
- this is funny, I've never been debugging two programs at once -- x86 SWOS vs VM SWOS comparing what's
  going on, and a good old x86 version has been an immense help, speeding everything up
- now the friendly menu shows "CHOOSE TEAMS" button after pressing "OK" (this part was missing), but it still
  fails with null pointer access in SetCountryNames() because countryNames array isn't getting populated for
  some reason
- yikes! I've accessed g_memDword in one place without dividing address by 4; that's why country names
  weren't populated
- managed to pass to the next menu, but this one is broken, the title entry is selected and I can't move
  anywhere :D
- dayum, didn't write to 2nd address when writing word to odd memory address :/ took a nice investigation to
  uncover this; with this fix the next menu is unlocked! I can now select teams, but when going to the next
  menu it crashes again :P
- the struct offset was wrong, when a struct contained a nested struct with dup modifier, the dup modifier
  wasn't multiplied in; after taking care of that got into play match menu and started the game... almost! :)
  it's crashing on the loading screen
- mistake was in struct variables... ugh, hate syncing variables, but had to go back there and fix extraneous
  bytes added to stadiumMenu
- also discovered a mistake in types sizes for ida2asm, added static_assert's so at least it won't compile if
  it ever happens again
- now going further, and crashing in ConvertSpriteColors(); seems that movzx is generating signed extension
  instead of unsigned; fixed and now reaching deep ocean, ending with a heap corruption X_X
25.09.2020.
- testing things by adding heap checks after each call, and then verify VM memory checks (after making them
  work properly), but it's all checking out fine, except for load file call, something fishy is going on
  there
- fixed ++/--/+=/-= SwosDataPointer operators
- d-oh! the memory array had the old (lower) size the whole time, that's why there were memory overwrites...
  :facepalm; after the fix there's some rogue pointer in GetTeamPointer()
- urgh, mask for writing 16-bit values was wrong, 0xff instead of 0xffff :/
- fixed copying pitch patterns, g_pitchDatBuffer was reinterpret casted into array of ordinary char pointers
  instead of SWOSDataPointer<char>'s
- fixed movzx from a variable (constant address) that was broken
- somehow in FadeOut() palette pointer gets obliterated; reason is a bit crazy, because in the calling tree
  from setPalette() a SWOS function(s) gets called (char drawing, by dumping routine) and trashes the
  important registers, so not even virtual registers are safe!
- and finally in the game :D player names are messed up, and flicker in an epilepsy-inducing manner, ball
  bounces strangely, as if it has more energy than it should, goalkeepers are letting easy goals in...
  just kidding about the goalkeepers ;D they seem OK-ish, as much as I could see until the game crashes
  (it hardly every survives longer than minute 70 or so); still, I'm pretty satisfied, will investigate more
  tomorrow, better get some sleep now :D
26.09.2020.
- implemented removing unused flags calculation from a function; unfortunately I didn't remember that there
  are functions that use flags as return values (zero, sign & carry), so the only flag available for removal
  was overflow; still, it removed thousands of lines, and overflow is the most complicated to calculate
- I've discovered something very interesting, there are only two jump-if-overflow instructions used in the
  whole program, and both are actually wrong! they are used after div instruction, which leaves overflow
  flag in undefined state; 68k does set overflow flag after division, so it must have been an oversight;
  they are used after some calculations in unknown part of the game (it seems to be something related to
  price calculations in career mode) and are practically used as an assertion -- game goes into infinite loop
  asking for debugger if they trigger -- so I will disable them for now
- fixed invalid code in the case when overflow flags is supressed
- added static assertions for couple variables struct members, so if it gets broken again it will be reported
  immediately
- fixed LODSW & LODSD; now the team names display properly at the start of the game; sprite flicker and weird
  ball bouncing are still present; played the game till minute 78 before crashing, that's a record so far
- fixed flags optimizer not removing flags on the instruction immediately following a label
- fixed flags optimizer not removing flags of the instruction before a label (caused by me erroneously adding
  isBranch() check along with flowChange, instead of replacing it)
- sprite flickering: after putting an assert at sprite index assignment and going backward I found that
  invalid sprite index was occasionally set by the animation routine, but it wasn't its fault, it was getting
  an already corrupted animation table; then I've set a data breakpoint on those trashed bytes and that lead
  me to ResetResultSprites(); it was trying to initialize team scorers data, but the structure wasn't
  generated properly, it was too short causing ResetResultSprites() to write well beyond it, into the
  animation tables; struct size was invalid (didn't count nested struct size properly), same thing I fixed
  in a different spot before -_- but not gonna bother now with refactoring
- fixed a little crash when going back to menus after the game
- and the game is working pretty well :) played a few games, no crashes, works pretty smooth, only this
  weird ball bouncing that's bugging me; will try compiling a 64-bit version, maybe it will be easier to
  catch it there (if I don't solve it by then)
- started with project conversion to 64-bit, ida2asm is already triggering some new assertion
27.09.2020.
- with the help of x64 version finally fixed that damn ida2asm occasional crash, ran it 30+ times and not
  a single failure, woohoo! it all came from branch instructions not getting their op info initialized and
  later causing nasty things, what was I thinking writing it...
- reorganized project to better accommodate multiple platforms, as well to be organized a bit better overall
- compiled all the necessary libraries in 64-bit mode, fixed errors, and the x64 version is finally built!
- adjusted VM memory pointers to be on the pointer size boundary and set up static asserts to trigger if
  they aren't
- 64-bit compiler is generating some stupid code, creating temporary SwosDataPointer on stack at rsp+21h,
  triggering misalignment assert; that forced me to add assignment operator that takes dword, and now it's
  assigning it directly and everyone is happy
- and played the first SWOS 64-bit game :D it was in debug mode and slow-motion, at least 2 times slower than
  the x86; noticed some other glitches too, some player icons weren't drawn during the loading menu, and
  sometimes wrong comment was played (maybe I'm wrong about this one); the ball bounce still felt weird,
  although it's hard to gauge when the game is so slow
- tried the release version, and that calmed me down: the game works brilliantly :D super fast and smooth,
  just the SWOS we know and love; the bounce still feels weird, and is especially noticeable on muddy pitch;
  it seems to happen on several occasions but it can be triggered by simply holding up/down and pressing
  fire, kick like this reaches opponents goal from almost half of the field
- pressing 'S' in debug version was causing stack overflow: the jump-to-function-start instruction was
  implemented via a function call and that was sucking the poor stack dry; replaced the call with a goto and
  it's fine now (still no idea why x64-debug version is so slow)
- lol, my x64 debug configuration was copied from release, that's why I was able to capture the ida2asm error
  so easily with an assert, why didn't I think of this before :)
- there was an error in parsing negative hex numbers, they weren't detected as hex properly; fixed, but the
  ball still acts weird :/
- fixed invalid memory dword read when address % 4 == 1, both constant and dynamic
- did more detailed comparison with x86, and "the super-bounce" is definitely a thing
28.09.2020.
- improved ida2asm error reporting a bit, though it's still quite rough
- fixed not clearing string flags for color converted sprite entry in unpackMenu()
- fixed a mistake in fetch user proc routine that was failing for the first one
- implemented releasing of memory when the menu closes (hope this will not unearth some bugs in SWOS menu
  handlers!)
29.09.2020.
- did static analysis and fixed a bunch of things, e.g. I was returning references to tmp objects in postfix
  increment overridden operators... big whoops, bunch of integer promotion traps etc.
- discovered & fixed an invalid type cast in IMUL
- preparing to commit took insanely long time, wasn't aware there were this many changes
30.09.2020.
- reversed parts of career initialization, namely parts that initialize foreign market players while chasing
  that infinite loop bug when starting new career
- that led me to a bug in optimizer, pinpointed it to shift instructions which weren't properly marking their
  target causing wrongful removal of some instructions; haven't got around to properly fix it just yet though
01.09.2020.
- ha, fix almost worked from first try, almost got me worried ;) still, it was done in a satisfying manner
- tested, and the infinite loop is gone as well as the super-bounce! so that's two birds with one stone :D
- fixed load files menu, now highlights/replays work, tactics importing etc.
- fixed video options menu
