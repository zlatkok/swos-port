#
# list of functions and variables to remove completely
# to remove a range, list beginning and ending function separated by - (minus)
# ranges are semi-open, just like in C++
#

@remove
# procs
__int_3 - SelectAndShowSquadToView
Initialization - RingABell
cseg_1994F
InitIntroAnimation
OpenSoccerBin
CopySoccerBinSection
ReadFromSoccerBin
IntroWaitNextFrameInterval
EGAFlip
ChangeMenuMusic
ExitOptions - SaveOptions
OptionsMenuBeforeDraw
ValidateHilPointerAdd - SaveHighlightsPointers
ResetAnimatedPatterns
FindFiles

# CD ROM routines
CDROM_GetInfo - Text2Sprite
# remove select files menu functions as well
FindFirstFile - SelectFileToSaveDialog

# joypads
Joy1SetStatus - TryRestartingMusic
VerifyJoypadControls

# commentary & sfx
PlayCommentarySample
PlaySampleFromTable
commentarySampleHandle
PlayHitFrameComment
SetVolumeOrStopChants
PlayGoodJumpHeaderComment

# big AIL & C-lib removal
# unfortunately, these ranges will have to be updated when file limits change
cseg_98EFD
cseg_9A9E1 - dseg
dataStart - aChairmanScenes
goalSamples - aSfxPierceM158_
headerSamples - PIT_countdown
aSwos_xmi - timerBoolean
aAsave_256 - dosMemSegment
PlaySwosXmi - SelectDefaultDrive
cseg_18236
dseg_16AECB
dosVariablesStart - dseg_185BA8
dseg_185BA8
PlayStartGameSample - EnqueueCornerSample
sfxLowerQualityTable - introTeamChantsTable
aSfxFx11Bgcrd3l - aSfxFxCombrown_

# substitutes
#DrawBenchPlayersAndCoach
#DrawSubstitutesMenu
#DrawOpponentsBench
#DrawSubstitutesMenuEntry
#DrawFormationMenu
#DrawFormationMenuEntry
#FillRectangle

# variables
prevVideoMode
errorCheckWord
linAdr120k - linAdr982k
handle982k - g_workingPalette
maxKbInMaxBlock
aPressEscToReturnToDosOrSpaceToCont - convertKeysTable
nextEntryDirectionOffsets
int9Ofs
int9Seg
# select files menu
dta - dseg_17FCB8
aBenc2_dat
aDemo_dat
# extend this range when removing options menu
aDemo1_car - friendlyGameMenu
optionsMenu - pitchTypeStrTable

# highlights
HighlightsMenu
HighlightsMenuInit - ViewHighlightsWrapper
LoadHilFile - SetTeamGlobalNumbers
IncrementHilBufferPointer

# CD ROM variables
dosMemSegment
dosMemSelector
aErrorCdromDriverError_ - aSensibleWorldOfSoccerV2_0


#
# turn these into null procs, consisting of retn only
#

@null
DummyProc01
ProgramPIT
ReadGamePort

#TODO: remove EGA crap
SetEGAPalette
EGA_GetVisibleScreenPtr
EGA_FillRectangle
EGA_DrawSprite
EGA_DrawSpriteInGame

# CD-ROM (kill these as soon as you can)
CDChangeToRootDir
SelectDefaultDrive

# chairman and win/lose animations
FadeAndPlayWinCupAnimation
FadeAndPlayWinMatchAnimation
FadeAndPlayLoseMatchAnimation
FadeAndPlayLoseCupAnimation
FadeAndPlayRelegatedAnimation
FadeAndPlayPromotedAnimation
PlayChairmanScene


#
# replace variable's content with what's given here
#

@replace
# careful when changing strings, as offsets must not change
aCommentary, 'COMMENTARY****', 0
aQuitToDos, 'QUIT TO WINDOWS', 0

# make sounds/music/commentary all ON by default
g_soundOff, 0
g_musicOff, 0
g_menuMusic, 1
g_commentary, 1

# make room for long filenames (though it will be limited by the UI)
hilFilename, 256 dup(0)
competitionFilename, 256 dup(0)
importTacticsFilename, 256 dup(0)


#
# these functions destroy registers C++ assumes will not change with a function call,
# so inject the code to save and restore them
# warning! do not to list procs with multiple exit points (e.g. they can jump to other procs)
# note:
#   always include or exclude both DrawSprite and DrawSpriteCentered, since later jumps into former
#

@save-regs
DrawSpriteInColor
DrawMenu
MainKeysCheck
HandleInstantReplayStateSwitch
RestoreCameraPosition
FadeIn
InitSavedSprites
InitBackground
ScrollToCurrent
DrawAnimatedPatterns
FadeAndSaveReplay
SortSprites
DarkenRectangle
CommonMenuExit
DrawMenuItem
CalcMenuEntryAddress
DrawMenuText
SetCurrentEntry
SavePixelsBehindSprite
FilterKeys
GetTextSize
ZeroOutStars
SetDefaultNameAndSurname
InitHighestScorersTable
InitUserTactics
SetHilFileHeader
InitDisplaySprites
EndFirstHalf
BumpAllPlayersLastPlayedHalfAtGameStart
BumpAllPlayersLastPlayedHalfPostGame
EndOfGame
EndFirstExtraTime
StartPenalties
StartFirstExtraTime


#
# list of symbols to export to header so they can be accessible from C++
# inside ASM files they will be prefixed with underscore, and made public
# syntax for generating SWOS C++ header files is:
# <symbol> [, prefix <prefix>][, function |, (array | pointer | ptr | functionPointer) <type>['['<size>']'] |, <type>]
#

@export

# controls
CheckControls, function
pl1ShortFire, byte
pl2ShortFire, byte
finalControlsStatus, int16_t
lastControls, word
fire, word
shortFire, word
longFireTime, word
longFireFlag, word
up, byte
down, byte
left, byte
right, byte
pl1LastFired, byte
pl2LastFired, byte
pl2ShortFireCounter, word
pl1FinalStatus, word
pl2FinalStatus, word
g_pl2Status, word
g_pl1Status, word
g_joy1X, word
g_joy1Y, word
g_joy2X, word
g_joy2Y, word
g_scanCode, word
keyCount, word
keyBuffer, array char[10]
lastKey, word
convertedKey, byte
convertKeysTable, array const char[110]
pl1Fire, byte
pl2Fire, byte
statsFireExit, word
controlWord, word

# menus
DrawMenu, function
DrawMenuItem, function
DrawMenuText, function
DrawMenuTextCentered, function
SetCurrentEntry, function
ConvertMenu, function
CommonMenuExit, function
RestorePreviousMenu, function
SetExitMenuFlag, function
CalcMenuEntryAddress, function
ShowErrorMenu, function
g_currentMenu, array char[6500]
g_currentMenuPtr, MenuBase *
previousMenuItem, MenuEntry *
g_exitMenu, word
player1ClearFlag, word
player2ClearFlag, word
menuFade, word
menuStatus, word
menuCycleTimer, word

# menu keyboard input
FilterKeys, function
InputText, function
g_inputingText, word
g_allowExtraCharsFlag, word

# main menu
SWOSMainMenuInit, function
EditTacticsMenu, function
FriendlyMenu, function
DIYCompetitionMenu, function
PresetCompetitionMenu, function
SeasonMenu, function
CareerMenu, function
StartContest, function
SaveContest, function
LoadOldCompetitionMenu, function
EditCustomTeamMenu, function

aEditTactics, array const char
aEditCustomTeam, array const char
aHighlights, array const char
aFriendly, array const char
aDiyCompetition, array const char
aPresetCompetit, array const char
aSeason, array const char
aCareer, array const char
saveFileTitle, array const char
aLoadOldCompeti, array const char
aQuitToDos, array const char
aReturnToGame, array const char

InitCareerVariables, function
SetDefaultNameAndSurname, function
InitHighestScorersTable, function
InitUserTactics, function

# select files menu
aAbort, array const char
aSave, array const char
g_skipNonCompetitionFiles, word

# options
ChangeGameLength, function
ChangePitchType, function
ChangeAutoReplays, function
ChangeAllPlTeamsEqual, function
ChangeAutoSaveHighlights, function
ChangeChairmanScenes, function
g_menuMusic, int16_t
g_musicOff, int16_t
g_inputControls, int16_t
g_gameLength, int16_t
g_autoReplays, int16_t
g_autoSaveHighlights, int16_t
g_allPlayerTeamsEqual, int16_t
g_pitchType, int16_t
g_commentary, int16_t
g_chairmanScenes, int16_t
g_spinBigS, int16_t
g_crowdChantsOn, int16_t

# options menu
ChangeCommentary, function
TryRestartingMusic, function
aOptions, array const char
aExit, array const char
aReplay, array const char
controlsStatus, word
showPrereleaseCounter, word
aFriendlyDiyGam, array const char
aFixPitchType, array const char
aAutoReplays, array const char
aAllPlayerTeams, array const char
aAutoSaveHighli, array const char
gameLengthStrTable, void *
pitchTypeStrTable, void *
autoReplaysStrTable, void *
allPlTeamsEqualStrTable, void *
autoSaveHlStrTable, void *
chairmanScenesStrTable, void *
aOn, array const char
aOff, array const char
aMenuMusic, array const char
aCommentary, array const char
aPlus, array const char
aMinus, array const char
menuMusicStrTable, void *
commentaryStrTable, void *
aCustom, array const char

# intro
PlayIntroAnimation, function
IntroFillSoundBuffer, function
aArcSoccer_bin, array const char
soccerBinPtr, char *
introCurrentSoundBuffer, char *
soccerBinSoundChunkBuffer, char *
soccerBinSoundDataPtr, char *
introCurrentSoundBufferChunk, char *
introScreenBuffer, char *
introAborted, byte
introFrameDataOffset, dword
introFirstChunkLoaded, byte
introNumFrames, dword
introFrameDataChunkRemainder, dword
soccerBinHandle, FILE *
introSoundBufferIndex, dword
introCurrentSoundBufferNum, byte
introFrameDataSize, dword
introCurrentFrameDataPtr, char *
introAnimationTimer, byte
introCountDownTimer, byte
introWaitInterval, byte
skipIntro, word

# sprites
DrawSprite, function
DrawSpriteInColor, function
SavePixelsBehindSprite, function
SortSprites, function
InitSavedSprites, function
numSpritesToRender, word
spritesIndex, array SpriteGraphics *
sortedSprites, array Sprite * [79]
numSpritesSaved, word
spriteGraphicsPtr, array SpriteGraphics *(*)
spriteFixupFlag, word
aSprite_dat, array const char

# highlights
RestoreHighlightPointers, function
HandleInstantReplayStateSwitch, function
FadeAndSaveReplay, function
ViewHighlightsWrapper, function
SetHilFileHeader, function
hilStartOfGoalsBuffer, array char
hilFileBuffer, array char
hilFilename, array char[256]
currentHilBuffer, array dword
goalBasePtr, dword *
currentGoalPtr, dword *
nextGoalPtr, dword *
currentHilPtr, dword *
instantReplayFlag, word
hilNumGoals, word
hilLeftTeamGoals, word
hilRightTeamGoals, word
replayState, word
hilSceneNumber, word
numReplaysInHilFile, word
playHighlightFlag, word
userRequestedReplay, word
fadeAndSaveReplay, word
gameMaxSubstitutes, word
hilMaxSubstitutes, word
hilStarted, word

# highlights menu
aViewHighlights, array const char
aLoadHighlights, array const char
aSaveHighlights, array const char
aNotAHighlights, array const char

# camera
MoveView, function
RestoreCameraPosition, function
ScrollToCurrent, function
g_cameraX, word
g_cameraY, word
g_oldCameraX, word
g_oldCameraY, word
savedCameraX, word
savedCameraY, word

# comments
g_muteCommentary, word
commentaryTable, array const char *
aHardM10_v__raw, array const char
aHardM10_w__raw, array const char
aHardM10_y__raw, array const char
aHardM313_1__ra, array const char
aHardM313_2__ra, array const char
aHardM313_3__ra, array const char
aHardM10_5__raw, array const char
aHardM10_7__raw, array const char
aHardM10_8__raw, array const char
aHardM10_9__raw, array const char
aHardM10_a__raw, array const char
aHardM10_b__raw, array const char
aHardM233_j__ra, array const char
aHardM233_k__ra, array const char
aHardM233_l__ra, array const char
aHardM233_m__ra, array const char
aHardM10_3__raw, array const char
aHardM10_4__raw, array const char
aHardM196_8__ra, array const char
aHardM196_9__ra, array const char
aHardM196_a__ra, array const char
aHardM196_b__ra, array const char
aHardM196_c__ra, array const char
aHardM196_d__ra, array const char
aHardM196_e__ra, array const char
aHardM196_f__ra, array const char
aHardM196_g__ra, array const char
aHardM196_h__ra, array const char
aHardM196_i__ra, array const char
aHardM196_j__ra, array const char
aHardM406_f__ra, array const char
aHardM406_g__ra, array const char
aHardM406_h__ra, array const char
aHardM406_i__ra, array const char
aHardM406_j__ra, array const char
aHardM443_7__ra, array const char
aHardM443_8__ra, array const char
aHardM443_9__ra, array const char
aHardM443_a__ra, array const char
aHardM443_b__ra, array const char
aHardM443_c__ra, array const char
aHardM443_d__ra, array const char
aHardM443_e__ra, array const char
aHardM443_f__ra, array const char
aHardM443_g__ra, array const char
aHardM443_h__ra, array const char
aHardM443_i__ra, array const char
aHardM443_j__ra, array const char
aHardM406_3__ra, array const char
aHardM406_8__ra, array const char
aHardM406_7__ra, array const char
aHardM406_9__ra, array const char

playingYellowCardTimer, int16_t
playingRedCardTimer, int16_t
playingGoodPassTimer, int16_t
playingThrowInSample, int16_t
playingCornerSample, int16_t
substituteSampleTimer, int16_t
tacticsChangedSampleTimer, int16_t
goalCounter, int16_t

playIntroChantSampleOffset, functionPointer
playFansChant8lOffset, functionPointer
playFansChant10lOffset, functionPointer
playFansChant4lOffset, functionPointer
goodPassTimer, word
soundEffectsTable, array const char *
introTeamChantIndices, array const int8_t[16]
introTeamChantsTable, array const char *
loadCrowdChantSampleFlag, word

performingPenalty, word
penaltiesState, word

resultChantFilenames, array const char *
endGameCrowdSamples, array const char *

# substitutes in-game menu
g_inSubstitutesMenu, word
g_leavingSubsMenu, word
g_cameraLeavingSubsLimit, word
g_subsTeamSidesSwapped, word
g_benchPlayerIndex, word
g_substituteInProgress, word
g_subsState, word
goToSubsTimer, word
g_benchTeam, TeamGeneralInfo *

# fades & palettes
FadeOutToBlack, function
FadeIn, function
skipFade, word
g_fadePalette, array char[768]
g_workingPalette, array char[768]

# memory buffers
dosMemLinAdr, char *
dosMemOfs30000h, char *
g_pitchPatterns, char *
dosMemOfs4fc00h, char *
dosMemOfs60c00h, char *
linAdr384k, char *

# music
LoadTitleAndStartMusic, function
StopMidi, function
TryMidiPlay, function

# misc
FixupInitialCharset, function
ChainFont, function
Randomize2, function
ClearBackground, function
ReadTimerDelta, function
MainKeysCheck, function
InitBackground, function
DrawAnimatedPatterns, function
DarkenRectangle, function
GameLoop, function
GetTextSize, function
ZeroOutStars, function
CopyTeamsAndHeader, function
LoadFillAndSwtitle, function

stadiumMenu, PackedMenu
setupDatBuffer, word
aSetup_dat, array const char
aSensibleWorldOfSoccerV2_0, array const char
selTeamsPtr, dword
partOneImages, array const char *
partTwoImages, array const char *
g_videoSpeedIndex, word
someColorConversionFlag, word
aCharset_dat, array const char
randomSeed, word
vsPtr, char *
screenWidth, dword
g_pitchDatBuffer, array char[10032]
skillsPerQuadrant, array char[245]
ofsPitch1Dat, const char *
aPitch1_blk, array const char
EGA_graphics, word
currentTick, word
paused, word
stoppageTimer, word
timerBoolean, word
bumpBigSFrame, word
aChairmanScenes, array const char
aMenu_xmi, array const char
g_soundOff, int16_t
g_memAllOk, word
g_gotExtraMemoryForSamples, word
g_midiPlaying, word
animPatternsState, word
normalReplayRunning, word
deltaColor, byte
gameAborted, word
teamDataPtr, TeamGeneralInfo *
big_S_Sprite, Sprite
playGame, word
team1Goals, word
team2Goals, word
statsTeam1Goals, word
statsTeam2Goals, word
statsTeam1GoalsCopy, word
statsTeam2GoalsCopy, word
team1GoalsFirstLeg, word
team2GoalsFirstLeg, word
smallCharsTable, CharTable
bigCharsTable, CharTable
twoPlayers, word
flipOnOff, word
inFriendlyMenu, word
isNationalTeam, word
fireResetFlag, word
dseg_10E848, word
dseg_10E846, word
dseg_11F41C, word
dseg_11F41E, word
coachOrPlayer, word
plNationality, word
competitionFileBuffer, array byte
g_numSelectedTeams, word
teamsLoaded, word
poolplyrLoaded, word
importTacticsFilename, array char[14]
chooseTacticsTeamPtr, void *
leftTeamIngame, TeamGame
rightTeamIngame, TeamGame
leftTeamData, TeamGeneralInfo
rightTeamData, TeamGeneralInfo
lastTeamPlayed, TeamGeneralInfo *
g_trainingGame, word
team1GoalsDigit2, word
team2GoalsDigit2, word
animatedPatterns, array int16_t[8]

g_exitGameFlag, word
useColorTable, word
isCareer, word
playMatchTeam1Ptr, char *
playMatchTeam2Ptr, char *
careerTeam, array char[1292]
replaySelected, word

PlayMatchSelected, function
playerNumThatStarted, word
pl1IsntPlayer, word

BumpAllPlayersLastPlayedHalfAtGameStart, function
BumpAllPlayersLastPlayedHalfPostGame, function
StartPenalties, function
gameStatePl, GameState
playingPenalties, word
stateGoal, word
secondLeg, word
playing2ndGame, word
winningTeamPtr, TeamGame *
ballSprite, Sprite

# time
InitDisplaySprites, function
EndFirstHalf, function
EndFirstExtraTime, function
EndOfGame, function
StartFirstExtraTime, function
currentTimeSprite, Sprite
timerDifference, word
timeDelta, word
copyTimeSprite, word
extraTimeState, word
gameSeconds, int16_t
endGameCounter, int16_t
secondsSwitchAccumulator, int16_t
gameTime, array byte[4]

### tester
chosenTactics, word

### debug dump
breakCameraMode, word


#
# at the beginning of each listed proc Foo insert a call to external Foo_OnEnter
#

@on-enter
DoUnchainSpriteInMenus
InitGame
ClearBackground
FadeOutToBlack
HandleInstantReplayStateSwitch
GameOver
MainKeysCheck
ShowStadiumInit


#
# insert a call to given C++ function into a proc at a given line
# in the form: <proc name>, <line number>[, <hook name>]
#
# if <hook_name> is not given a default name will be generated in the form of: <proc name>_<line number>
# it's effectively an import entry
#
# special hook name @remove can be used to remove lines
#

@insert-hook
AdjustPlayerSkills, 246, FixTwoCPUsGameCrash

# TODO: remove this when bench routines are converted
LeaveSubsMenu, 1, @remove

CheckIfBallOutOfPlay, 252, FixPenaltyBug
GameLoop, 92, InsertPauseBeforeTheGameIfNeeded
GameLoop, 224, LoadCrowdChantSampleIfNeeded
GameLoop, 346, GameEnded
InputTextKeyLoop, 3, AbortTextInputOnEscapeAndRightMouseClick
PlayerDoingHeader, 161, PlayHeaderComment
PlayerTackled, 59, PlayInjuryComment
RunStoppageEventsAndSetAnimationTables, 339, EnqueueCrowdChantsReload
SetupPlayers, 161, PreventPlayer1FireLockout


#
# list of symbols that will be replaced by the C++ code
# it is assumed to be a label in assembly, and a parameterless function in C++, returning void or int
# they'll go to SWOS namespace to avoid name clashes
#

@import
SWOS
ToMainGameLoop

# files
LoadFile, int
WriteFile, int
GetFilenameAndExtension, int
SelectFileToSaveDialog, int

# main menu
MainMenu
InitMainMenu
InitMainMenuStuff

# menus
MenuProc
FlipInMenu
SetPalette
ShowMenu

# sprites
DrawSpriteInCameraView
DrawSprite16Pixels
CopySprite

SetPrevVideoModeEndProgram
ReadPitchFile
WaitRetrace
Flip
DrawBackPattern
InitMenuMusic
PlayMidi
StopMidiSequence
FadeOutXmidi
StopAudio
IntroEnsureFrameDataLoaded
IntroDrawFrame
JoyKeyOrCtrlPressed
CloseSoccerBin
GetKey

# replays
PlayHighlightsLoop
ReplayFrame
PlayInstantReplayLoop
SaveCoordinatesForHighlights

DrawSprites
OptionsMenuSelected
PrepareMenu

# commentary/sfx
LoadCommentary
LoadSoundEffects
LoadIntroChant
PlaySoundSample
PlayPenaltyGoalComment
PlayPenaltyMissComment
PlayPenaltySavedComment
PlayPenaltyComment
PlayFoulComment
PlayDangerousPlayComment
PlayGoodPassComment
PlayGoodTackleComment
PlayPostHitComment
PlayBarHitComment
PlayKeeperClaimedComment
PlayNearMissComment
PlayGoalkeeperSavedComment
PlayOwnGoalComment
PlayGoalComment
PlayYellowCardSample
PlayRedCardSample
PlayCornerSample
PlayTacticsChangeSample
PlaySubstituteSample
PlayThrowInSample
PlaySensationalGameComment
PlayCrowdNoiseSample
LoadCrowdChantSample
PlayMissGoalSample
PlayHomeGoalSample
PlayAwayGoalSample
PlayRefereeWhistleSample
PlayEndGameWhistleSample
PlayFoulWhistleSample
PlayKickSample
PlayBallBounceSample
LoadAndPlayEndGameComment
PlayFansChant4lSample
PlayFansChant8lSample
PlayFansChant10lSample
PlayIntroChantSample
PlayResultSample
PlayEnqueuedSamples
TurnCrowdChantsOn
TurnCrowdChantsOff
PlayDrawComment
PlayItsBeenACompleteRoutComment
PlayCrowdChants

EndProgram
ResetAnimatedPatternsForBothTeams
Player1StatusProc
Player2StatusProc
StartMainGameLoop
ExitPlayMatch
ReplayExitMenuAfterFriendly
Int2Ascii
ExitEuropeanChampionshipMenu
#DrawBenchAndSubsMenu
ResetTime
UpdateTime
