# list of functions to remove completely
# to remove a range, list beginning and ending function separated by - (minus)
# ranges are semi-open, just like in C++

@remove
# procs
__int_3 - SelectAndShowSquadToView
Initialization - RingABell
cseg_1994F
InitIntroAnimation
OpenSoccerBin
CopySoccerBinSection
ReadFromSoccerBin
IntroWaitNextFrameInterval
EGAFlip
ChangeMenuMusic
ExitOptions
OptionsMenuBeforeDraw
ValidateHilPointerAdd - InitHighlightsPointers
ResetAnimatedPatterns

# CD ROM routines
CDROM_GetInfo - Text2Sprite
FindFirstFile - SelectFilesInit

# joypads
Joy1SetStatus - TryRestartingMusic
VerifyJoypadControls

# commentary & sfx
PlayCommentarySample
PlaySampleFromTable
commentarySampleHandle
PlayHitFrameComment
SetVolumeOrStopChants
PlayGoodJumpHeaderComment

# big AIL & C-lib removal
# unfortunately, these ranges will have to be updated when file limits change
cseg_98EFD
cseg_9A9E1 - cseg_A3368
cseg_A3368
cseg_A3375 - __init_80x87
__init_80x87
dataStart - aChairmanScenes
goalSamples - aSfxPierceM158_
jumpHeadersSamples - PIT_countdown
aSwos_xmi - timerBoolean
aAsave_256 - dosMemSegment
PlaySwosXmi - SelectDefaultDrive
cseg_18236
dseg_16AECB
dosVariablesStart - dseg_185BA8
dseg_185BA8
PlayStartGameSample - EnqueueCornerSample
sfxLowerQualityTable - introTeamChantsTable
aSfxFx11Bgcrd3l - aSfxFxCombrown_

# variables
prevVideoMode
errorCheckWord
linAdr120k - linAdr982k
handle982k - g_workingPalette
maxKbInMaxBlock
aPressEscToReturnToDosOrSpaceToCont - convertKeysTable
nextEntryDirectionOffsets
int9Ofs
int9Seg
dta - totalNumberOfFiles
aBenc2_dat
aDemo_dat
aDemo_dat_0 - friendlyGameMenu
# extend this range when removing options menu
aDemo1_car - SWOS_MainMenu
optionsMenu - pitchTypeStrTable

# CD ROM variables
dosMemSegment
dosMemSelector
aErrorCdromDriverError_ - aSensibleWorldOfSoccerV2_0


# turn these into null procs, consisting of retn only
@null
DummyProc01
ProgramPIT
ReadGamePort
SetDefaultOptions
PlayChairmanScene

#TODO: remove EGA crap
SetEGAPalette
EGA_GetVisibleScreenPtr
EGA_FillRectangle
EGA_DrawSprite
EGA_DrawSpriteInGame

# CD-ROM (kill these as soon as you can)
CDChangeToRootDir
SelectDefaultDrive


# replace variable's content with what's given here
@replace
# careful when changing strings, as offsets must not change
aCommentary, 'COMMENTARY****', 0
aQuitToDos, 'QUIT TO WINDOWS', 0
# make sounds/music/commentary all ON by default
g_soundOff, 0
g_musicOff, 0
g_menuMusic, 1
g_commentary, 1


# these functions destroy registers C++ assumes will not change with a function call,
# so inject the code to save and restore them
# warning: do not list DrawSprite16Pixels here, it can exit by jumping to other procs!

@save-regs
DrawSprite
DrawSpriteInColor
DrawSpriteCentered
DrawChar
TextToGoalScorersSprites
DrawMenu
MainKeysCheck
FindStartingDword
RestoreCameraPosition
FadeIn
InitSavedSprites
InitBackground
ScrollToCurrent
DrawAnimatedPatterns
FadeAndSaveReplay
SortSprites
SaveCoordinatesForHighlights
DarkenRectangle
CommonMenuExit
DrawMenuItem
CalcMenuEntryAddress
DrawMenuText
SetCurrentEntry
SaveSprite
FilterKeys


# list of symbols to export to header so they can be accessible from C++
# inside asm files they will be prefixed with underscore, and made public
# syntax for generating SWOS C++ header files is:
# <symbol> [, prefix <prefix>][, function |, (array | pointer | ptr | functionPointer) <type>['['<size>']'] |, <type>]

@export
# options
g_menuMusic, int16_t
g_musicOff, int16_t
g_inputControls, int16_t
g_gameLength, int16_t
g_autoReplays, int16_t
g_autoSaveHighlights, int16_t
g_allPlayerTeamsEqual, int16_t
g_pitchType, int16_t
g_commentary, int16_t
g_chairmanScenes, int16_t
g_spinBigS, int16_t
g_crowdChantsOn, int16_t

skipIntro, word
setupDatBuffer, word
dosMemLinAdr, char *
dosMemOfs30000h, char *
g_pitchPatterns, char *
dosMemOfs4fc00h, char *
dosMemOfs60c00h, char *
aSensibleWorldOfSoccerV2_0, array const char
selTeamsPtr, dword
aSetup_dat, array const char
linAdr384k, char *
FadeOutToBlack, function
partOneImages, array const char *
partTwoImages, array const char *
controlWord, word
g_videoSpeedIndex, word
g_pl2Status, word
g_pl1Status, word
g_joy1X, word
g_joy1Y, word
g_joy2X, word
g_joy2Y, word
someColorConversionFlag, word
aSprite_dat, array const char
aCharset_dat, array const char
goalBasePtr, dword *
nextGoalPtr, dword *
hilFileBuffer, array char
currentHilBuffer, array dword
randomSeed, word
LoadTitleAndStartMusic, function
FixupInitialCharset, function
ChainFont, function
Randomize2, function
vsPtr, char *
screenWidth, dword
spriteFixupFlag, word
g_scanCode, word
keyCount, word
keyBuffer, array char[10]
lastKey, word
convertedKey, byte
convertKeysTable, array const char[110]
menuStatus, word
g_currentMenu, array char[6500]
g_exitMenu, word
g_currentMenuPtr, MenuBase *
RestorePreviousMenu, function
g_extension, array char
g_pitchDatBuffer, array char[10032]
skillsPerQuadrant, array char[245]
ofsPitch1Dat, const char *
aPitch1_blk, array const char
g_fadePalette, array char[768]
menuCycleTimer, word
EGA_graphics, word
g_workingPalette, array char[768]
currentTick, word
paused, word
stoppageTimer, word
timerBoolean, word
bumpBigSFrame, word
ClearBackground, function
aChairmanScenes, array const char
aMenu_xmi, array const char
g_soundOff, int16_t
g_memAllOk, word
g_gotExtraMemoryForSamples, word
PlayIntroAnimation, function
IntroFillSoundBuffer, function
aArcSoccer_bin, array const char
soccerBinPtr, char *
introCurrentSoundBuffer, char *
soccerBinSoundChunkBuffer, char *
soccerBinSoundDataPtr, char *
introCurrentSoundBufferChunk, char *
introScreenBuffer, char *
introAborted, byte
introFrameDataOffset, dword
introFirstChunkLoaded, byte
introNumFrames, dword
introFrameDataChunkRemainder, dword
soccerBinHandle, FILE *
introSoundBufferIndex, dword
introCurrentSoundBufferNum, byte
introFrameDataSize, dword
introCurrentFrameDataPtr, char *
introAnimationTimer, byte
introCountDownTimer, byte
introWaitInterval, byte
g_midiPlaying, word
ReadTimerDelta, function
playHighlightFlag, word
MainKeysCheck, function
replayState, word
hilSceneNumber, word
numReplaysInHilFile, word
RestoreGoalPointers, function
hilStartOfGoalsBuffer, array char
currentHilPtr, dword *
FindStartingDword, function
skipFade, word
RestoreCameraPosition, function
pl1Fire, byte
pl2Fire, byte
statsFireExit, word
FadeIn, function
cameraX, word
cameraY, word
savedCameraX, word
savedCameraY, word
oldCameraX, word
oldCameraY, word
currentGoalPtr, dword *
InitSavedSprites, function
InitBackground, function
ScrollToCurrent, function
MoveView, function
hilLeftTeamGoals, word
hilRightTeamGoals, word
DrawAnimatedPatterns, function
animPatternsState, word
DrawSprite16Pixels, function
noBigReplayLetter, word
deltaColor, byte
gameAborted, word
userRequestedReplay, word
teamDataPtr, TeamGeneralInfo *
fadeAndSaveReplay, word
FadeAndSaveReplay, function
resetHilPtrFlag, word
SortSprites, function
numSpritesToRender, word
sortedSprites, array Player * [79]
spriteGraphicsPtr, SpriteGraphics **
big_S_Sprite, Player
SaveCoordinatesForHighlights, function
DarkenRectangle, function
playGame, word
CommonMenuExit, function

# options menu
aOptions, array const char
aExit, array const char
aReplay, array const char
SetExitMenuFlag, function
controlsStatus, word
showPrereleaseCounter, word
CalcMenuEntryAddress, function
aFriendlyDiyGam, array const char
aFixPitchType, array const char
aAutoReplays, array const char
aAllPlayerTeams, array const char
aAutoSaveHighli, array const char
gameLengthStrTable, void *
pitchTypeStrTable, void *
autoReplaysStrTable, void *
allPlTeamsEqualStrTable, void *
autoSaveHlStrTable, void *
chairmanScenesStrTable, void *
ChangeGameLength, function
ChangePitchType, function
ChangeAutoReplays, function
ChangeAllPlTeamsEqual, function
ChangeAutoSaveHighlights, function
ChangeChairmanScenes, function
aOn, array const char
aOff, array const char
aMenuMusic, array const char
aCommentary, array const char
aPlus, array const char
aMinus, array const char
menuMusicStrTable, void *
commentaryStrTable, void *
ChangeCommentary, function
aCustom, array const char
ShowErrorMenu, function
DrawMenuItem, function
TryRestartingMusic, function
DrawMenuText, function
DrawMenuTextCentered, function
DrawSprite, function
SetCurrentEntry, function

ConvertMenu, function
player1ClearFlag, word
player2ClearFlag, word

smallCharsTable, array const char

spritesIndex, array SpriteGraphics *
SaveSprite, function
DrawSpriteInColor, function
numSpritesSaved, word

# comments
g_muteCommentary, word
commentaryTable, array const char *
aHardM10_v__raw, array const char
aHardM10_w__raw, array const char
aHardM10_y__raw, array const char
aHardM313_1__ra, array const char
aHardM313_2__ra, array const char
aHardM313_3__ra, array const char
aHardM10_5__raw, array const char
aHardM10_7__raw, array const char
aHardM10_8__raw, array const char
aHardM10_9__raw, array const char
aHardM10_a__raw, array const char
aHardM10_b__raw, array const char
aHardM233_j__ra, array const char
aHardM233_k__ra, array const char
aHardM233_l__ra, array const char
aHardM233_m__ra, array const char
aHardM10_3__raw, array const char
aHardM10_4__raw, array const char
aHardM196_8__ra, array const char
aHardM196_9__ra, array const char
aHardM196_a__ra, array const char
aHardM196_b__ra, array const char
aHardM196_c__ra, array const char
aHardM196_d__ra, array const char
aHardM196_e__ra, array const char
aHardM196_f__ra, array const char
aHardM196_g__ra, array const char
aHardM196_h__ra, array const char
aHardM196_i__ra, array const char
aHardM196_j__ra, array const char
aHardM406_f__ra, array const char
aHardM406_g__ra, array const char
aHardM406_h__ra, array const char
aHardM406_i__ra, array const char
aHardM406_j__ra, array const char
aHardM443_7__ra, array const char
aHardM443_8__ra, array const char
aHardM443_9__ra, array const char
aHardM443_a__ra, array const char
aHardM443_b__ra, array const char
aHardM443_c__ra, array const char
aHardM443_d__ra, array const char
aHardM443_e__ra, array const char
aHardM443_f__ra, array const char
aHardM443_g__ra, array const char
aHardM443_h__ra, array const char
aHardM443_i__ra, array const char
aHardM443_j__ra, array const char
aHardM406_3__ra, array const char
aHardM406_8__ra, array const char
aHardM406_7__ra, array const char
aHardM406_9__ra, array const char

playIntroChantSampleOffset, functionPointer
playFansChant8lOffset, functionPointer
playFansChant10lOffset, functionPointer
playFansChant4lOffset, functionPointer
goodPassTimer, word
soundEffectsTable, array const char *
leftTeamIngame, TeamGame
rightTeamIngame, TeamGame
introTeamChantIndices, array const int8_t[16]
introTeamChantsTable, array const char *
loadCrowdChantSampleFlag, word

playingYellowCardTimer, int16_t
playingRedCardTimer, int16_t
playingGoodPassTimer, int16_t
playingThrowInSample, int16_t
playingCornerSample, int16_t
substituteSampleTimer, int16_t
tacticsChangedSampleTimer, int16_t
goalCounter, int16_t

performingPenalty, word
penaltiesState, word

statsTeam1Goals, word
statsTeam2Goals, word
resultChantFilenames, array const char *

g_trainingGame, word
team1GoalsDigit2, word
team2GoalsDigit2, word
endGameCrowdSamples, array const char *

DrawMenu, function
menuFade, word
CheckControls, function
finalControlsStatus, int16_t
previousMenuItem, MenuEntry *
InitMainMenuStuff, function

fire, word
shortFire, word
longFireTime, word
longFireFlag, word
up, byte
down, byte
left, byte
right, byte
pl1LastFired, byte
pl2LastFired, byte
pl2ShortFireCounter, word
pl1FinalStatus, word
pl2FinalStatus, word

animatedPatterns, array int16_t[8]
GameLoop, function

GetTextSize, function

g_exitGameFlag, word
useColorTable, word
isCareer, word
playMatchTeam1Ptr, char *
playMatchTeam2Ptr, char *
careerTeam, array char[1292]

pl1ShortFire, byte
pl2ShortFire, byte

PlayMatchSelected, function
playerNumThatStarted, word
pl1IsntPlayer, word

replaySelected, word

inputingText, word
FilterKeys, function

### debug dump
breakCameraMode, word


# at the beginning of each listed proc Foo insert a call to external Foo_OnEnter
@on-enter
DoUnchainSpriteInMenus
InitGame
ClearBackground
FadeOutToBlack
FindStartingDword
DrawBenchAndSubsMenu
GameOver


# insert call into a proc at a given line, in the form of call <proc name>_<line number>
# it's effectively and import entry
@insert-hook
RunStoppageEventsAndSetAnimationTables, 320
GameLoop, 224
PlayerDoingHeader, 157
PlayerTackled, 59
CheckIfBallOutOfPlay, 251
SetupPlayers, 160
InputText, 23


# list of symbols that will be replaced by code from C++
# it is assumed to be a label in assembly, and void parameterless function in C++
# they'll go to SWOS namespace to avoid name clashes

@import
SWOS
ToMainGameLoop
LoadFile
WriteFile
MainMenu
InitMainMenu
MenuProc
FlipInMenu
SetPalette
ShowMenu
SetPrevVideoModeEndProgram
FindFiles
FindFilesExtensionPresent
ReadPitchFile
WaitRetrace
Flip
DrawBackPattern
InitMenuMusic
PlayMidi
StopMidiSequence
FadeOutXmidi
StopAudio
IntroEnsureFrameDataLoaded
IntroDrawFrame
JoyKeyOrCtrlPressed
CloseSoccerBin
PlayIntroSample
PlayHighlightsLoop
GetKey
RenderReplayFrame
PlayReplayLoop
DrawSprites
OptionsMenuSelected
PrepareMenu
LoadCommentary
LoadSoundEffects
LoadIntroChant
PlayPenaltyGoalComment
PlayPenaltyMissComment
PlayPenaltySavedComment
PlayPenaltyComment
PlayFoulComment
PlayDangerousPlayComment
PlayGoodPassComment
PlayGoodTackleComment
PlayPostHitComment
PlayBarHitComment
PlayKeeperClaimedComment
PlayNearMissComment
PlayGoalkeeperSavedComment
PlayOwnGoalComment
PlayGoalComment
PlayYellowCardSample
PlayRedCardSample
PlayCornerSample
PlayTacticsChangeSample
PlaySubstituteSample
PlayThrowInSample
PlaySensationalGameComment
PlayCrowdNoiseSample
LoadCrowdChantSample
PlayMissGoalSample
PlayHomeGoalSample
PlayAwayGoalSample
PlayRefereeWhistleSample
PlayEndGameWhistleSample
PlayFoulWhistleSample
PlayKickSample
PlayBallBounceSample
LoadAndPlayEndGameComment
PlayFansChant4lSample
PlayFansChant8lSample
PlayFansChant10lSample
PlayIntroChantSample
PlayResultSample
PlayEnqueuedSamples
TurnCrowdChantsOn
TurnCrowdChantsOff
PlayDrawComment
PlayItsBeenACompleteRoutComment
PlayCrowdChants
EndProgram
ResetAnimatedPatternsForBothTeams
Player1StatusProc
Player2StatusProc
StartMainGameLoop
ExitPlayMatch
ReplayExitMenuAfterFriendly
Int2Ascii
